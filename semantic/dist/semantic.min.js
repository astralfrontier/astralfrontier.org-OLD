 /*
 * # Semantic UI - 2.2.11
 * https://github.com/Semantic-Org/Semantic-UI
 * http://www.semantic-ui.com/
 *
 * Copyright 2014 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,n,o){"use strict";var t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.api=e.fn.api=function(n){var o,i=e(e.isFunction(this)?t:this),s=i.selector||"",r=(new Date).getTime(),a=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var i,d,f,m,v,g=e.isPlainObject(n)?e.extend(!0,{},e.fn.api.settings,n):e.extend({},e.fn.api.settings),h=g.namespace,p=g.metadata,b=g.selector,y=g.error,x=g.className,C="."+h,w="module-"+h,S=e(this),T=S.closest(b.form),k=g.stateContext?e(g.stateContext):S,R=this,A=k[0],P=S.data(w);v={initialize:function(){c||v.bind.events(),v.instantiate()},instantiate:function(){v.verbose("Storing instance of module",v),P=v,S.data(w,P)},destroy:function(){v.verbose("Destroying previous module for",R),S.removeData(w).off(C)},bind:{events:function(){var e=v.get.event();e?(v.verbose("Attaching API events to element",e),S.on(e+C,v.event.trigger)):"now"==g.on&&(v.debug("Querying API endpoint immediately"),v.query())}},decode:{json:function(e){if(void 0!==e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var n;{if(void 0!==t.Storage)return n=sessionStorage.getItem(e),v.debug("Using cached response",e,n),n=v.decode.json(n);v.error(y.noStorage)}}},write:{cachedResponse:function(n,o){o&&""===o?v.debug("Response empty, not caching",o):void 0!==t.Storage?(e.isPlainObject(o)&&(o=JSON.stringify(o)),sessionStorage.setItem(n,o),v.verbose("Storing cached response for url",n,o)):v.error(y.noStorage)}},query:function(){if(v.is.disabled())v.debug("Element is disabled API request aborted");else{if(v.is.loading()){if(!g.interruptRequests)return void v.debug("Cancelling request, previous request is still pending");v.debug("Interrupting previous request"),v.abort()}if(g.defaultData&&e.extend(!0,g.urlData,v.get.defaultData()),g.serializeForm&&(g.data=v.add.formData(g.data)),!1===(d=v.get.settings()))return v.cancelled=!0,void v.error(y.beforeSend);if(v.cancelled=!1,(f=v.get.templatedURL())||v.is.mocked()){if((f=v.add.urlData(f))||v.is.mocked()){if(d.url=g.base+f,i=e.extend(!0,{},g,{type:g.method||g.type,data:void 0,url:g.base+f,beforeSend:g.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),v.debug("Querying URL",i.url),v.verbose("Using AJAX settings",i),"local"===g.cache&&v.read.cachedResponse(f))return v.debug("Response returned from local cache"),v.request=v.create.request(),void v.request.resolveWith(A,[v.read.cachedResponse(f)]);g.throttle?g.throttleFirstRequest||v.timer?(v.debug("Throttling request",g.throttle),clearTimeout(v.timer),v.timer=setTimeout(function(){v.timer&&delete v.timer,v.debug("Sending throttled request",void 0,i.method),v.send.request()},g.throttle)):(v.debug("Sending request",void 0,i.method),v.send.request(),v.timer=setTimeout(function(){},g.throttle)):(v.debug("Sending request",void 0,i.method),v.send.request())}}else v.error(y.missingURL)}},should:{removeError:function(){return!0===g.hideError||"auto"===g.hideError&&!v.is.form()}},is:{disabled:function(){return S.filter(b.disabled).length>0},expectingJSON:function(){return"json"===g.dataType||"jsonp"===g.dataType},form:function(){return S.is("form")||k.is("form")},mocked:function(){return g.mockResponse||g.mockResponseAsync||g.response||g.responseAsync},input:function(){return S.is("input")},loading:function(){return!!v.request&&"pending"==v.request.state()},abortedRequest:function(e){return e&&void 0!==e.readyState&&0===e.readyState?(v.verbose("XHR request determined to be aborted"),!0):(v.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return v.is.expectingJSON()&&e.isFunction(g.successTest)?(v.debug("Checking JSON returned success",g.successTest,t),g.successTest(t)?(v.debug("Response passed success test",t),!0):(v.debug("Response failed success test",t),!1)):(v.verbose("Response is not JSON, skipping validation",g.successTest,t),!0)}},was:{cancelled:function(){return v.cancelled||!1},succesful:function(){return v.request&&"resolved"==v.request.state()},failure:function(){return v.request&&"rejected"==v.request.state()},complete:function(){return v.request&&("resolved"==v.request.state()||"rejected"==v.request.state())}},add:{urlData:function(t,n){var o,i;return t&&(o=t.match(g.regExp.required),i=t.match(g.regExp.optional),n=n||g.urlData,o&&(v.debug("Looking for required URL variables",o),e.each(o,function(o,i){var s=-1!==i.indexOf("$")?i.substr(2,i.length-3):i.substr(1,i.length-2),r=e.isPlainObject(n)&&void 0!==n[s]?n[s]:void 0!==S.data(s)?S.data(s):void 0!==k.data(s)?k.data(s):n[s];if(void 0===r)return v.error(y.requiredParameter,s,t),t=!1,!1;v.verbose("Found required variable",s,r),r=g.encodeParameters?v.get.urlEncodedValue(r):r,t=t.replace(i,r)})),i&&(v.debug("Looking for optional URL variables",o),e.each(i,function(o,i){var s=-1!==i.indexOf("$")?i.substr(3,i.length-4):i.substr(2,i.length-3),r=e.isPlainObject(n)&&void 0!==n[s]?n[s]:void 0!==S.data(s)?S.data(s):void 0!==k.data(s)?k.data(s):n[s];void 0!==r?(v.verbose("Optional variable Found",s,r),t=t.replace(i,r)):(v.verbose("Optional variable not found",s),t=-1!==t.indexOf("/"+i)?t.replace("/"+i,""):t.replace(i,""))}))),t},formData:function(t){var n=void 0!==e.fn.serializeObject,o=n?T.serializeObject():T.serialize();return t=t||g.data,e.isPlainObject(t)?n?(v.debug("Extending existing data with form data",t,o),t=e.extend(!0,{},t,o)):(v.error(y.missingSerialize),v.debug("Cant extend data. Replacing data with form data",t,o),t=o):(v.debug("Adding form data",o),t=o),t}},send:{request:function(){v.set.loading(),v.request=v.create.request(),v.is.mocked()?v.mockedXHR=v.create.mockedXHR():v.xhr=v.create.xhr(),g.onRequest.call(A,v.request,v.xhr)}},event:{trigger:function(e){v.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,n,o){var i=this,s=(new Date).getTime()-m,r=g.loadingDuration-s,a=!!e.isFunction(g.onResponse)&&(v.is.expectingJSON()?g.onResponse.call(i,e.extend(!0,{},t)):g.onResponse.call(i,t));r=r>0?r:0,a&&(v.debug("Modified API response in onResponse callback",g.onResponse,a,t),t=a),r>0&&v.debug("Response completed early delaying state change by",r),setTimeout(function(){v.is.validResponse(t)?v.request.resolveWith(i,[t,o]):v.request.rejectWith(i,[o,"invalid"])},r)},fail:function(e,t,n){var o=this,i=(new Date).getTime()-m,s=g.loadingDuration-i;(s=s>0?s:0)>0&&v.debug("Response completed early delaying state change by",s),setTimeout(function(){v.is.abortedRequest(e)?v.request.rejectWith(o,[e,"aborted",n]):v.request.rejectWith(o,[e,"error",t,n])},s)}},request:{done:function(e,t){v.debug("Successful API Response",e),"local"===g.cache&&f&&(v.write.cachedResponse(f,e),v.debug("Saving server response locally",v.cache)),g.onSuccess.call(A,e,S,t)},complete:function(e,t){var n,o;v.was.succesful()?(o=e,n=t):(n=e,o=v.get.responseFromXHR(n)),v.remove.loading(),g.onComplete.call(A,o,S,n)},fail:function(e,t,n){var o=v.get.responseFromXHR(e),s=v.get.errorFromRequest(o,t,n);if("aborted"==t)return v.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,n),g.onAbort.call(A,t,S,e),!0;"invalid"==t?v.debug("JSON did not pass success test. A server-side error has most likely occurred",o):"error"==t&&void 0!==e&&(v.debug("XHR produced a server error",t,n),200!=e.status&&void 0!==n&&""!==n&&v.error(y.statusMessage+n,i.url),g.onError.call(A,s,S,e)),g.errorDuration&&"aborted"!==t&&(v.debug("Adding error state"),v.set.error(),v.should.removeError()&&setTimeout(v.remove.error,g.errorDuration)),v.debug("API Request failed",s,e),g.onFailure.call(A,o,S,e)}}},create:{request:function(){return e.Deferred().always(v.event.request.complete).done(v.event.request.done).fail(v.event.request.fail)},mockedXHR:function(){var t,n,o,i=g.mockResponse||g.response,s=g.mockResponseAsync||g.responseAsync;return o=e.Deferred().always(v.event.xhr.complete).done(v.event.xhr.done).fail(v.event.xhr.fail),i?(e.isFunction(i)?(v.debug("Using specified synchronous callback",i),n=i.call(A,d)):(v.debug("Using settings specified response",i),n=i),o.resolveWith(A,[n,!1,{responseText:n}])):e.isFunction(s)&&(t=function(e){v.debug("Async callback returned response",e),e?o.resolveWith(A,[e,!1,{responseText:e}]):o.rejectWith(A,[{responseText:e},!1,!1])},v.debug("Using specified async response callback",s),s.call(A,d,t)),o},xhr:function(){var t;return t=e.ajax(i).always(v.event.xhr.always).done(v.event.xhr.done).fail(v.event.xhr.fail),v.verbose("Created server request",t,i),t}},set:{error:function(){v.verbose("Adding error state to element",k),k.addClass(x.error)},loading:function(){v.verbose("Adding loading state to element",k),k.addClass(x.loading),m=(new Date).getTime()}},remove:{error:function(){v.verbose("Removing error state from element",k),k.removeClass(x.error)},loading:function(){v.verbose("Removing loading state from element",k),k.removeClass(x.loading)}},get:{responseFromXHR:function(t){return!!e.isPlainObject(t)&&(v.is.expectingJSON()?v.decode.json(t.responseText):t.responseText)},errorFromRequest:function(t,n,o){return e.isPlainObject(t)&&void 0!==t.error?t.error:void 0!==g.error[n]?g.error[n]:o},request:function(){return v.request||!1},xhr:function(){return v.xhr||!1},settings:function(){var t;return(t=g.beforeSend.call(A,g))&&(void 0!==t.success&&(v.debug("Legacy success callback detected",t),v.error(y.legacyParameters,t.success),t.onSuccess=t.success),void 0!==t.failure&&(v.debug("Legacy failure callback detected",t),v.error(y.legacyParameters,t.failure),t.onFailure=t.failure),void 0!==t.complete&&(v.debug("Legacy complete callback detected",t),v.error(y.legacyParameters,t.complete),t.onComplete=t.complete)),void 0===t&&v.error(y.noReturnedValue),!1===t?t:void 0!==t?e.extend(!0,{},t):e.extend(!0,{},g)},urlEncodedValue:function(e){var n=t.decodeURIComponent(e),o=t.encodeURIComponent(e);return n!==e?(v.debug("URL value is already encoded, avoiding double encoding",e),e):(v.verbose("Encoding value using encodeURIComponent",e,o),o)},defaultData:function(){var t={};return e.isWindow(R)||(v.is.input()?t.value=S.val():v.is.form()||(t.text=S.text())),t},event:function(){return e.isWindow(R)||"now"==g.on?(v.debug("API called without element, no events attached"),!1):"auto"==g.on?S.is("input")?void 0!==R.oninput?"input":void 0!==R.onpropertychange?"propertychange":"keyup":S.is("form")?"submit":"click":g.on},templatedURL:function(e){if(e=e||S.data(p.action)||g.action||!1,f=S.data(p.url)||g.url||!1)return v.debug("Using specified url",f),f;if(e){if(v.debug("Looking up url for action",e,g.api),void 0===g.api[e]&&!v.is.mocked())return void v.error(y.missingAction,g.action,g.api);f=g.api[e]}else v.is.form()&&(f=S.attr("action")||k.attr("action")||!1,v.debug("No url or action specified, defaulting to form action",f));return f}},abort:function(){var e=v.get.xhr();e&&"resolved"!==e.state()&&(v.debug("Cancelling API request"),e.abort())},reset:function(){v.remove.error(),v.remove.loading()},setting:function(t,n){if(v.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===n)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===n)return v[t];v[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,g.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),v.verbose.apply(console,arguments)))},error:function(){g.silent||(v.error=Function.prototype.bind.call(console.error,console,g.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,n;g.performance&&(n=(t=(new Date).getTime())-(r||t),r=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=g.name+":",n=0;r=!1,clearTimeout(v.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,i){var s,r,a,l=P;return n=n||u,i=R||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,o){var i=n!=s?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=s)l=l[i];else{if(void 0!==l[i])return r=l[i],!1;if(!e.isPlainObject(l[o])||n==s)return void 0!==l[o]?(r=l[o],!1):(v.error(y.method,t),!1);l=l[o]}})),e.isFunction(r)?a=r.apply(i,n):void 0!==r&&(a=r),e.isArray(o)?o.push(a):void 0!==o?o=[o,a]:void 0!==a&&(o=a),r}},c?(void 0===P&&v.initialize(),v.invoke(l)):(void 0!==P&&P.invoke("destroy"),v.initialize())}),void 0!==o?o:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dropdown=function(o){var i,s=e(this),r=e(n),a=s.selector||"",l="ontouchstart"in n.documentElement,c=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,m=[].slice.call(arguments,1);return s.each(function(v){var g,h,p,b,y,x,C,w,S=e.isPlainObject(o)?e.extend(!0,{},e.fn.dropdown.settings,o):e.extend({},e.fn.dropdown.settings),T=S.className,k=S.message,R=S.fields,A=S.keys,P=S.metadata,q=S.namespace,O=S.regExp,F=S.selector,D=S.error,E=S.templates,I="."+q,L="module-"+q,z=e(this),j=e(S.context),V=z.find(F.text),M=z.find(F.search),N=z.find(F.sizer),H=z.find(F.input),U=z.find(F.icon),B=z.prev().find(F.text).length>0?z.prev().find(F.text):z.prev(),W=z.children(F.menu),X=W.find(F.item),K=!1,J=!1,Q=!1,$=this,Y=z.data(L);w={initialize:function(){w.debug("Initializing dropdown",S),w.is.alreadySetup()?w.setup.reference():(w.setup.layout(),w.refreshData(),w.save.defaults(),w.restore.selected(),w.create.id(),w.bind.events(),w.observeChanges(),w.instantiate())},instantiate:function(){w.verbose("Storing instance of dropdown",w),Y=w,z.data(L,w)},destroy:function(){w.verbose("Destroying previous dropdown",z),w.remove.tabbable(),z.off(I).removeData(L),W.off(I),r.off(b),w.disconnect.menuObserver(),w.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in t&&(x=new MutationObserver(w.event.select.mutation),C=new MutationObserver(w.event.menu.mutation),w.debug("Setting up mutation observer",x,C),w.observe.select(),w.observe.menu())},disconnect:{menuObserver:function(){C&&C.disconnect()},selectObserver:function(){x&&x.disconnect()}},observe:{select:function(){w.has.input()&&x.observe(H[0],{childList:!0,subtree:!0})},menu:function(){w.has.menu()&&C.observe(W[0],{childList:!0,subtree:!0})}},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8),b="."+y,w.verbose("Creating unique id for element",y)},userChoice:function(t){var n,o,i;return!!(t=t||w.get.userValues())&&(t=e.isArray(t)?t:[t],e.each(t,function(t,s){!1===w.get.item(s)&&(i=S.templates.addition(w.add.variables(k.addResult,s)),o=e("<div />").html(i).attr("data-"+P.value,s).attr("data-"+P.text,s).addClass(T.addition).addClass(T.item),S.hideAdditions&&o.addClass(T.hidden),n=void 0===n?o:n.add(o),w.verbose("Creating user choices for value",s,o))}),n)},userLabels:function(t){var n=w.get.userValues();n&&(w.debug("Adding user labels",n),e.each(n,function(e,t){w.verbose("Adding custom user value"),w.add.label(t,t)}))},menu:function(){W=e("<div />").addClass(T.menu).appendTo(z)},sizer:function(){N=e("<span />").addClass(T.sizer).insertAfter(M)}},search:function(e){e=void 0!==e?e:w.get.query(),w.verbose("Searching for query",e),w.has.minCharacters(e)?w.filter(e):w.hide()},select:{firstUnfiltered:function(){w.verbose("Selecting first non-filtered element"),w.remove.selectedItem(),X.not(F.unselectable).not(F.addition+F.hidden).eq(0).addClass(T.selected)},nextAvailable:function(e){var t=(e=e.eq(0)).nextAll(F.item).not(F.unselectable).eq(0),n=e.prevAll(F.item).not(F.unselectable).eq(0);t.length>0?(w.verbose("Moving selection to",t),t.addClass(T.selected)):(w.verbose("Moving selection to",n),n.addClass(T.selected))}},setup:{api:function(){var e={debug:S.debug,urlData:{value:w.get.value(),query:w.get.query()},on:!1};w.verbose("First request, initializing API"),z.api(e)},layout:function(){z.is("select")&&(w.setup.select(),w.setup.returnedObject()),w.has.menu()||w.create.menu(),w.is.search()&&!w.has.search()&&(w.verbose("Adding search input"),M=e("<input />").addClass(T.search).prop("autocomplete","off").insertBefore(V)),w.is.multiple()&&w.is.searchSelection()&&!w.has.sizer()&&w.create.sizer(),S.allowTab&&w.set.tabbable()},select:function(){var t=w.get.selectValues();w.debug("Dropdown initialized on a select",t),z.is("select")&&(H=z),H.parent(F.dropdown).length>0?(w.debug("UI dropdown already exists. Creating dropdown menu only"),z=H.closest(F.dropdown),w.has.menu()||w.create.menu(),W=z.children(F.menu),w.setup.menu(t)):(w.debug("Creating entire dropdown from select"),z=e("<div />").attr("class",H.attr("class")).addClass(T.selection).addClass(T.dropdown).html(E.dropdown(t)).insertBefore(H),H.hasClass(T.multiple)&&!1===H.prop("multiple")&&(w.error(D.missingMultiple),H.prop("multiple",!0)),H.is("[multiple]")&&w.set.multiple(),H.prop("disabled")&&(w.debug("Disabling dropdown"),z.addClass(T.disabled)),H.removeAttr("class").detach().prependTo(z)),w.refresh()},menu:function(e){W.html(E.menu(e,R)),X=W.find(F.item)},reference:function(){w.debug("Dropdown behavior was called on select, replacing with closest dropdown"),z=z.parent(F.dropdown),w.refresh(),w.setup.returnedObject(),f&&(Y=w,w.invoke(d))},returnedObject:function(){var e=s.slice(0,v),t=s.slice(v+1);s=e.add(z).add(t)}},refresh:function(){w.refreshSelectors(),w.refreshData()},refreshItems:function(){X=W.find(F.item)},refreshSelectors:function(){w.verbose("Refreshing selector cache"),V=z.find(F.text),M=z.find(F.search),H=z.find(F.input),U=z.find(F.icon),B=z.prev().find(F.text).length>0?z.prev().find(F.text):z.prev(),W=z.children(F.menu),X=W.find(F.item)},refreshData:function(){w.verbose("Refreshing cached metadata"),X.removeData(P.text).removeData(P.value)},clearData:function(){w.verbose("Clearing metadata"),X.removeData(P.text).removeData(P.value),z.removeData(P.defaultText).removeData(P.defaultValue).removeData(P.placeholderText)},toggle:function(){w.verbose("Toggling menu visibility"),w.is.active()?w.hide():w.show()},show:function(t){if(t=e.isFunction(t)?t:function(){},!w.can.show()&&w.is.remote()&&(w.debug("No API results retrieved, searching before show"),w.queryRemote(w.get.query(),w.show)),w.can.show()&&!w.is.active()){if(w.debug("Showing dropdown"),!w.has.message()||w.has.maxSelections()||w.has.allResultsFiltered()||w.remove.message(),w.is.allFiltered())return!0;!1!==S.onShow.call($)&&w.animate.show(function(){w.can.click()&&w.bind.intent(),w.has.menuSearch()&&w.focusSearch(),w.set.visible(),t.call($)})}},hide:function(t){t=e.isFunction(t)?t:function(){},w.is.active()&&(w.debug("Hiding dropdown"),!1!==S.onHide.call($)&&w.animate.hide(function(){w.remove.visible(),t.call($)}))},hideOthers:function(){w.verbose("Finding other dropdowns to hide"),s.not(z).has(F.menu+"."+T.visible).dropdown("hide")},hideMenu:function(){w.verbose("Hiding menu  instantaneously"),w.remove.active(),w.remove.visible(),W.transition("hide")},hideSubMenus:function(){var e=W.children(F.item).find(F.menu);w.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){l&&w.bind.touchEvents(),w.bind.keyboardEvents(),w.bind.inputEvents(),w.bind.mouseEvents()},touchEvents:function(){w.debug("Touch device detected binding additional touch events"),w.is.searchSelection()||w.is.single()&&z.on("touchstart"+I,w.event.test.toggle),W.on("touchstart"+I,F.item,w.event.item.mouseenter)},keyboardEvents:function(){w.verbose("Binding keyboard events"),z.on("keydown"+I,w.event.keydown),w.has.search()&&z.on(w.get.inputEvent()+I,F.search,w.event.input),w.is.multiple()&&r.on("keydown"+b,w.event.document.keydown)},inputEvents:function(){w.verbose("Binding input change events"),z.on("change"+I,F.input,w.event.change)},mouseEvents:function(){w.verbose("Binding mouse events"),w.is.multiple()&&z.on("click"+I,F.label,w.event.label.click).on("click"+I,F.remove,w.event.remove.click),w.is.searchSelection()?(z.on("mousedown"+I,w.event.mousedown).on("mouseup"+I,w.event.mouseup).on("mousedown"+I,F.menu,w.event.menu.mousedown).on("mouseup"+I,F.menu,w.event.menu.mouseup).on("click"+I,F.icon,w.event.icon.click).on("focus"+I,F.search,w.event.search.focus).on("click"+I,F.search,w.event.search.focus).on("blur"+I,F.search,w.event.search.blur).on("click"+I,F.text,w.event.text.focus),w.is.multiple()&&z.on("click"+I,w.event.click)):("click"==S.on?z.on("click"+I,F.icon,w.event.icon.click).on("click"+I,w.event.test.toggle):"hover"==S.on?z.on("mouseenter"+I,w.delay.show).on("mouseleave"+I,w.delay.hide):z.on(S.on+I,w.toggle),z.on("mousedown"+I,w.event.mousedown).on("mouseup"+I,w.event.mouseup).on("focus"+I,w.event.focus),w.has.menuSearch()?z.on("blur"+I,F.search,w.event.search.blur):z.on("blur"+I,w.event.blur)),W.on("mouseenter"+I,F.item,w.event.item.mouseenter).on("mouseleave"+I,F.item,w.event.item.mouseleave).on("click"+I,F.item,w.event.item.click)},intent:function(){w.verbose("Binding hide intent event to document"),l&&r.on("touchstart"+b,w.event.test.touch).on("touchmove"+b,w.event.test.touch),r.on("click"+b,w.event.test.hide)}},unbind:{intent:function(){w.verbose("Removing hide intent event from document"),l&&r.off("touchstart"+b).off("touchmove"+b),r.off("click"+b)}},filter:function(e){var t=void 0!==e?e:w.get.query(),n=function(){w.is.multiple()&&w.filterActive(),(e||!e&&0==w.get.activeItem().length)&&w.select.firstUnfiltered(),w.has.allResultsFiltered()?S.onNoResults.call($,t)?S.allowAdditions?S.hideAdditions&&(w.verbose("User addition with no menu, setting empty style"),w.set.empty(),w.hideMenu()):(w.verbose("All items filtered, showing message",t),w.add.message(k.noResults)):(w.verbose("All items filtered, hiding dropdown",t),w.hideMenu()):(w.remove.empty(),w.remove.message()),S.allowAdditions&&w.add.userSuggestion(e),w.is.searchSelection()&&w.can.show()&&w.is.focusedOnSearch()&&w.show()};S.useLabels&&w.has.maxSelections()||(S.apiSettings?w.can.useAPI()?w.queryRemote(t,function(){S.filterRemoteData&&w.filterItems(t),n()}):w.error(D.noAPI):(w.filterItems(t),n()))},queryRemote:function(t,n){var o={errorDuration:!1,cache:"local",throttle:S.throttle,urlData:{query:t},onError:function(){w.add.message(k.serverError),n()},onFailure:function(){w.add.message(k.serverError),n()},onSuccess:function(e){w.remove.message(),w.setup.menu({values:e[R.remoteValues]}),n()}};z.api("get request")||w.setup.api(),o=e.extend(!0,{},o,S.apiSettings),z.api("setting",o).api("query")},filterItems:function(t){var n=void 0!==t?t:w.get.query(),o=null,i=w.escape.string(n),s=new RegExp("^"+i,"igm");w.has.query()&&(o=[],w.verbose("Searching for matching values",n),X.each(function(){var t,i,r=e(this);if("both"==S.match||"text"==S.match){if(-1!==(t=String(w.get.choiceText(r,!1))).search(s))return o.push(this),!0;if("exact"===S.fullTextSearch&&w.exactSearch(n,t))return o.push(this),!0;if(!0===S.fullTextSearch&&w.fuzzySearch(n,t))return o.push(this),!0}if("both"==S.match||"value"==S.match){if(-1!==(i=String(w.get.choiceValue(r,t))).search(s))return o.push(this),!0;if("exact"===S.fullTextSearch&&w.exactSearch(n,i))return o.push(this),!0;if(!0===S.fullTextSearch&&w.fuzzySearch(n,i))return o.push(this),!0}})),w.debug("Showing only matched items",n),w.remove.filteredItem(),o&&X.not(o).addClass(T.filtered)},fuzzySearch:function(e,t){var n=t.length,o=e.length;if(e=e.toLowerCase(),t=t.toLowerCase(),o>n)return!1;if(o===n)return e===t;e:for(var i=0,s=0;i<o;i++){for(var r=e.charCodeAt(i);s<n;)if(t.charCodeAt(s++)===r)continue e;return!1}return!0},exactSearch:function(e,t){return e=e.toLowerCase(),(t=t.toLowerCase()).indexOf(e)>-1},filterActive:function(){S.useLabels&&X.filter("."+T.active).addClass(T.filtered)},focusSearch:function(e){w.has.search()&&!w.is.focusedOnSearch()&&(e?(z.off("focus"+I,F.search),M.focus(),z.on("focus"+I,F.search,w.event.search.focus)):M.focus())},forceSelection:function(){var e=X.not(T.filtered).filter("."+T.selected).eq(0),t=X.not(T.filtered).filter("."+T.active).eq(0),n=e.length>0?e:t;if(n.length>0&&!w.is.multiple())return w.debug("Forcing partial selection to selected item",n),void w.event.item.click.call(n,{},!0);S.allowAdditions?(w.set.selected(w.get.query()),w.remove.searchTerm()):w.remove.searchTerm()},event:{change:function(){Q||(w.debug("Input changed, updating selection"),w.set.selected())},focus:function(){S.showOnFocus&&!K&&w.is.hidden()&&!h&&w.show()},blur:function(e){h=n.activeElement===this,K||h||(w.remove.activeLabel(),w.hide())},mousedown:function(){w.is.searchSelection()?p=!0:K=!0},mouseup:function(){w.is.searchSelection()?p=!1:K=!1},click:function(t){e(t.target).is(z)&&(w.is.focusedOnSearch()?w.show():w.focusSearch())},search:{focus:function(){K=!0,w.is.multiple()&&w.remove.activeLabel(),S.showOnFocus&&w.search()},blur:function(e){h=n.activeElement===this,w.is.searchSelection()&&!p&&(J||h||(S.forceSelection&&w.forceSelection(),w.hide())),p=!1}},icon:{click:function(e){w.toggle()}},text:{focus:function(e){K=!0,w.focusSearch()}},input:function(e){(w.is.multiple()||w.is.searchSelection())&&w.set.filtered(),clearTimeout(w.timer),w.timer=setTimeout(w.search,S.delay.search)},label:{click:function(t){var n=e(this),o=z.find(F.label),i=o.filter("."+T.active),s=n.nextAll("."+T.active),r=n.prevAll("."+T.active),a=s.length>0?n.nextUntil(s).add(i).add(n):n.prevUntil(r).add(i).add(n);t.shiftKey?(i.removeClass(T.active),a.addClass(T.active)):t.ctrlKey?n.toggleClass(T.active):(i.removeClass(T.active),n.addClass(T.active)),S.onLabelSelect.apply(this,o.filter("."+T.active))}},remove:{click:function(){var t=e(this).parent();t.hasClass(T.active)?w.remove.activeLabels():w.remove.activeLabels(t)}},test:{toggle:function(e){var t=w.is.multiple()?w.show:w.toggle;w.is.bubbledLabelClick(e)||w.is.bubbledIconClick(e)||w.determine.eventOnElement(e,t)&&e.preventDefault()},touch:function(e){w.determine.eventOnElement(e,function(){"touchstart"==e.type?w.timer=setTimeout(function(){w.hide()},S.delay.touch):"touchmove"==e.type&&clearTimeout(w.timer)}),e.stopPropagation()},hide:function(e){w.determine.eventInModule(e,w.hide)}},select:{mutation:function(e){w.debug("<select> modified, recreating menu"),w.setup.select()}},menu:{mutation:function(t){var n=t[0],o=e(n.addedNodes?n.addedNodes[0]:!1),i=e(n.removedNodes?n.removedNodes[0]:!1),s=o.add(i),r=s.is(F.addition)||s.closest(F.addition).length>0,a=s.is(F.message)||s.closest(F.message).length>0;r||a?(w.debug("Updating item selector cache"),w.refreshItems()):(w.debug("Menu modified, updating selector cache"),w.refresh())},mousedown:function(){J=!0},mouseup:function(){J=!1}},item:{mouseenter:function(t){var n=e(t.target),o=e(this),i=o.children(F.menu),s=o.siblings(F.item).children(F.menu),r=i.length>0;!(i.find(n).length>0)&&r&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Showing sub-menu",i),e.each(s,function(){w.animate.hide(!1,e(this))}),w.animate.show(!1,i)},S.delay.show),t.preventDefault())},mouseleave:function(t){var n=e(this).children(F.menu);n.length>0&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Hiding sub-menu",n),w.animate.hide(!1,n)},S.delay.hide))},click:function(t,o){var i=e(this),s=e(t?t.target:""),r=i.find(F.menu),a=w.get.choiceText(i),l=w.get.choiceValue(i,a),c=r.length>0,u=r.find(s).length>0;w.has.menuSearch()&&e(n.activeElement).blur(),u||c&&!S.allowCategorySelection||(w.is.searchSelection()&&(S.allowAdditions&&w.remove.userAddition(),w.remove.searchTerm(),w.is.focusedOnSearch()||1==o||w.focusSearch(!0)),S.useLabels||(w.remove.filteredItem(),w.set.scrollPosition(i)),w.determine.selectAction.call(this,a,l))}},document:{keydown:function(e){var t=e.which;if(w.is.inObject(t,A)){var n=z.find(F.label),o=n.filter("."+T.active),i=(o.data(P.value),n.index(o)),s=n.length,r=o.length>0,a=o.length>1,l=0===i,c=i+1==s,u=w.is.searchSelection(),d=w.is.focusedOnSearch(),f=w.is.focused(),m=d&&0===w.get.caretPosition();if(u&&!r&&!d)return;t==A.leftArrow?!f&&!m||r?r&&(e.shiftKey?w.verbose("Adding previous label to selection"):(w.verbose("Selecting previous label"),n.removeClass(T.active)),l&&!a?o.addClass(T.active):o.prev(F.siblingLabel).addClass(T.active).end(),e.preventDefault()):(w.verbose("Selecting previous label"),n.last().addClass(T.active)):t==A.rightArrow?(f&&!r&&n.first().addClass(T.active),r&&(e.shiftKey?w.verbose("Adding next label to selection"):(w.verbose("Selecting next label"),n.removeClass(T.active)),c?u?d?n.removeClass(T.active):w.focusSearch():a?o.next(F.siblingLabel).addClass(T.active):o.addClass(T.active):o.next(F.siblingLabel).addClass(T.active),e.preventDefault())):t==A.deleteKey||t==A.backspace?r?(w.verbose("Removing active labels"),c&&u&&!d&&w.focusSearch(),o.last().next(F.siblingLabel).addClass(T.active),w.remove.activeLabels(o),e.preventDefault()):m&&!r&&t==A.backspace&&(w.verbose("Removing last label on input backspace"),o=n.last().addClass(T.active),w.remove.activeLabels(o)):o.removeClass(T.active)}}},keydown:function(e){var t=e.which;if(w.is.inObject(t,A)){var n,o=X.not(F.unselectable).filter("."+T.selected).eq(0),i=W.children("."+T.active).eq(0),s=o.length>0?o:i,r=s.length>0?s.siblings(":not(."+T.filtered+")").addBack():W.children(":not(."+T.filtered+")"),a=s.children(F.menu),l=s.closest(F.menu),c=l.hasClass(T.visible)||l.hasClass(T.animating)||l.parent(F.menu).length>0,u=a.length>0,d=s.length>0,f=s.not(F.unselectable).length>0,m=t==A.delimiter&&S.allowAdditions&&w.is.multiple();if(S.allowAdditions&&S.hideAdditions&&(t==A.enter||m)&&f&&(w.verbose("Selecting item from keyboard shortcut",s),w.event.item.click.call(s,e),w.is.searchSelection()&&w.remove.searchTerm()),w.is.visible()){if((t==A.enter||m)&&(t==A.enter&&d&&u&&!S.allowCategorySelection?(w.verbose("Pressed enter on unselectable category, opening sub menu"),t=A.rightArrow):f&&(w.verbose("Selecting item from keyboard shortcut",s),w.event.item.click.call(s,e),w.is.searchSelection()&&w.remove.searchTerm()),e.preventDefault()),d&&(t==A.leftArrow&&l[0]!==W[0]&&(w.verbose("Left key pressed, closing sub-menu"),w.animate.hide(!1,l),s.removeClass(T.selected),l.closest(F.item).addClass(T.selected),e.preventDefault()),t==A.rightArrow&&u&&(w.verbose("Right key pressed, opening sub-menu"),w.animate.show(!1,a),s.removeClass(T.selected),a.find(F.item).eq(0).addClass(T.selected),e.preventDefault())),t==A.upArrow){if(n=d&&c?s.prevAll(F.item+":not("+F.unselectable+")").eq(0):X.eq(0),r.index(n)<0)return w.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();w.verbose("Up key pressed, changing active item"),s.removeClass(T.selected),n.addClass(T.selected),w.set.scrollPosition(n),S.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),e.preventDefault()}if(t==A.downArrow){if(0===(n=d&&c?n=s.nextAll(F.item+":not("+F.unselectable+")").eq(0):X.eq(0)).length)return w.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();w.verbose("Down key pressed, changing active item"),X.removeClass(T.selected),n.addClass(T.selected),w.set.scrollPosition(n),S.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),e.preventDefault()}t==A.pageUp&&(w.scrollPage("up"),e.preventDefault()),t==A.pageDown&&(w.scrollPage("down"),e.preventDefault()),t==A.escape&&(w.verbose("Escape key pressed, closing dropdown"),w.hide())}else m&&e.preventDefault(),t!=A.downArrow||w.is.visible()||(w.verbose("Down key pressed, showing dropdown"),w.show(),e.preventDefault())}else w.has.search()||w.set.selectedLetter(String.fromCharCode(t))}},trigger:{change:function(){var e=n.createEvent("HTMLEvents"),t=H[0];t&&(w.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},determine:{selectAction:function(t,n){w.verbose("Determining action",S.action),e.isFunction(w.action[S.action])?(w.verbose("Triggering preset action",S.action,t,n),w.action[S.action].call($,t,n,this)):e.isFunction(S.action)?(w.verbose("Triggering user action",S.action,t,n),S.action.call($,t,n,this)):w.error(D.action,S.action)},eventInModule:function(t,o){var i=e(t.target),s=i.closest(n.documentElement).length>0,r=i.closest(z).length>0;return o=e.isFunction(o)?o:function(){},s&&!r?(w.verbose("Triggering event",o),o(),!0):(w.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(t,o){var i=e(t.target),s=i.closest(F.siblingLabel),r=n.body.contains(t.target),a=0===z.find(s).length,l=0===i.closest(W).length;return o=e.isFunction(o)?o:function(){},r&&a&&l?(w.verbose("Triggering event",o),o(),!0):(w.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(t,n,o){if(n=void 0!==n?n:t,w.can.activate(e(o))){if(w.set.selected(n,e(o)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},select:function(t,n,o){if(n=void 0!==n?n:t,w.can.activate(e(o))){if(w.set.value(n,e(o)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},combo:function(t,n,o){n=void 0!==n?n:t,w.set.selected(n,e(o)),w.hideAndClear()},hide:function(e,t,n){w.set.value(t,e),w.hideAndClear()}},get:{id:function(){return y},defaultText:function(){return z.data(P.defaultText)},defaultValue:function(){return z.data(P.defaultValue)},placeholderText:function(){return z.data(P.placeholderText)||""},text:function(){return V.text()},query:function(){return e.trim(M.val())},searchWidth:function(e){return e=void 0!==e?e:M.val(),N.text(e),Math.ceil(N.width()+1)},selectionCount:function(){var t=w.get.values();return w.is.multiple()?e.isArray(t)?t.length:0:""!==w.get.value()?1:0},transition:function(e){return"auto"==S.transition?w.is.upward(e)?"slide up":"slide down":S.transition},userValues:function(){var t=w.get.values();return!!t&&(t=e.isArray(t)?t:[t],e.grep(t,function(e){return!1===w.get.item(e)}))},uniqueArray:function(t){return e.grep(t,function(n,o){return e.inArray(n,t)===o})},caretPosition:function(){var e,t,o=M.get(0);return"selectionStart"in o?o.selectionStart:n.selection?(o.focus(),e=n.selection.createRange(),t=e.text.length,e.moveStart("character",-o.value.length),e.text.length-t):void 0},value:function(){var t=H.length>0?H.val():z.data(P.value),n=e.isArray(t)&&1===t.length&&""===t[0];return void 0===t||n?"":t},values:function(){var e=w.get.value();return""===e?"":!w.has.selectInput()&&w.is.multiple()?"string"==typeof e?e.split(S.delimiter):"":e},remoteValues:function(){var t=w.get.values(),n=!1;return t&&("string"==typeof t&&(t=[t]),e.each(t,function(e,t){var o=w.read.remoteData(t);w.verbose("Restoring value from session data",o,t),o&&(n||(n={}),n[t]=o)})),n},choiceText:function(t,n){if(n=void 0!==n?n:S.preserveHTML,t)return t.find(F.menu).length>0&&(w.verbose("Retrieving text of element with sub-menu"),(t=t.clone()).find(F.menu).remove(),t.find(F.menuIcon).remove()),void 0!==t.data(P.text)?t.data(P.text):n?e.trim(t.html()):e.trim(t.text())},choiceValue:function(t,n){return n=n||w.get.choiceText(t),!!t&&(void 0!==t.data(P.value)?String(t.data(P.value)):"string"==typeof n?e.trim(n.toLowerCase()):String(n))},inputEvent:function(){var e=M[0];return!!e&&(void 0!==e.oninput?"input":void 0!==e.onpropertychange?"propertychange":"keyup")},selectValues:function(){var t={};return t.values=[],z.find("option").each(function(){var n=e(this),o=n.html(),i=n.attr("disabled"),s=void 0!==n.attr("value")?n.attr("value"):o;"auto"===S.placeholder&&""===s?t.placeholder=o:t.values.push({name:o,value:s,disabled:i})}),S.placeholder&&"auto"!==S.placeholder&&(w.debug("Setting placeholder value to",S.placeholder),t.placeholder=S.placeholder),S.sortSelect?(t.values.sort(function(e,t){return e.name>t.name?1:-1}),w.debug("Retrieved and sorted values from select",t)):w.debug("Retrieved values from select",t),t},activeItem:function(){return X.filter("."+T.active)},selectedItem:function(){var e=X.not(F.unselectable).filter("."+T.selected);return e.length>0?e:X.eq(0)},itemWithAdditions:function(e){var t=w.get.item(e),n=w.create.userChoice(e);return n&&n.length>0&&(t=t.length>0?t.add(n):n),t},item:function(t,n){var o,i,s=!1;return t=void 0!==t?t:void 0!==w.get.values()?w.get.values():w.get.text(),o=i?t.length>0:void 0!==t&&null!==t,i=w.is.multiple()&&e.isArray(t),n=""===t||0===t||(n||!1),o&&X.each(function(){var o=e(this),r=w.get.choiceText(o),a=w.get.choiceValue(o,r);if(null!==a&&void 0!==a)if(i)-1===e.inArray(String(a),t)&&-1===e.inArray(r,t)||(s=s?s.add(o):o);else if(n){if(w.verbose("Ambiguous dropdown value using strict type check",o,t),a===t||r===t)return s=o,!0}else if(String(a)==String(t)||r==t)return w.verbose("Found select item by value",a,t),s=o,!0}),s}},check:{maxSelections:function(e){return!S.maxSelections||((e=void 0!==e?e:w.get.selectionCount())>=S.maxSelections?(w.debug("Maximum selection count reached"),S.useLabels&&(X.addClass(T.filtered),w.add.message(k.maxSelections)),!0):(w.verbose("No longer at maximum selection count"),w.remove.message(),w.remove.filteredItem(),w.is.searchSelection()&&w.filterItems(),!1))}},restore:{defaults:function(){w.clear(),w.restore.defaultText(),w.restore.defaultValue()},defaultText:function(){var e=w.get.defaultText();e===w.get.placeholderText?(w.debug("Restoring default placeholder text",e),w.set.placeholderText(e)):(w.debug("Restoring default text",e),w.set.text(e))},placeholderText:function(){w.set.placeholderText()},defaultValue:function(){var e=w.get.defaultValue();void 0!==e&&(w.debug("Restoring default value",e),""!==e?(w.set.value(e),w.set.selected()):(w.remove.activeItem(),w.remove.selectedItem()))},labels:function(){S.allowAdditions&&(S.useLabels||(w.error(D.labels),S.useLabels=!0),w.debug("Restoring selected values"),w.create.userLabels()),w.check.maxSelections()},selected:function(){w.restore.values(),w.is.multiple()?(w.debug("Restoring previously selected values and labels"),w.restore.labels()):w.debug("Restoring previously selected values")},values:function(){w.set.initialLoad(),S.apiSettings&&S.saveRemoteData&&w.get.remoteValues()?w.restore.remoteValues():w.set.selected(),w.remove.initialLoad()},remoteValues:function(){var t=w.get.remoteValues();w.debug("Recreating selected from session data",t),t&&(w.is.single()?e.each(t,function(e,t){w.set.text(t)}):e.each(t,function(e,t){w.add.label(e,t)}))}},read:{remoteData:function(e){var n;{if(void 0!==t.Storage)return void 0!==(n=sessionStorage.getItem(e))&&n;w.error(D.noStorage)}}},save:{defaults:function(){w.save.defaultText(),w.save.placeholderText(),w.save.defaultValue()},defaultValue:function(){var e=w.get.value();w.verbose("Saving default value as",e),z.data(P.defaultValue,e)},defaultText:function(){var e=w.get.text();w.verbose("Saving default text as",e),z.data(P.defaultText,e)},placeholderText:function(){var e;!1!==S.placeholder&&V.hasClass(T.placeholder)&&(e=w.get.text(),w.verbose("Saving placeholder text as",e),z.data(P.placeholderText,e))},remoteData:function(e,n){void 0!==t.Storage?(w.verbose("Saving remote data to session storage",n,e),sessionStorage.setItem(n,e)):w.error(D.noStorage)}},clear:function(){w.is.multiple()&&S.useLabels?w.remove.labels():(w.remove.activeItem(),w.remove.selectedItem()),w.set.placeholderText(),w.clearValue()},clearValue:function(){w.set.value("")},scrollPage:function(e,t){var n,o,i=t||w.get.selectedItem(),s=i.closest(F.menu),r=s.outerHeight(),a=s.scrollTop(),l=X.eq(0).outerHeight(),c=Math.floor(r/l),u=(s.prop("scrollHeight"),"up"==e?a-l*c:a+l*c),d=X.not(F.unselectable);o="up"==e?d.index(i)-c:d.index(i)+c,(n=("up"==e?o>=0:o<d.length)?d.eq(o):"up"==e?d.first():d.last()).length>0&&(w.debug("Scrolling page",e,n),i.removeClass(T.selected),n.addClass(T.selected),S.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),s.scrollTop(u))},set:{filtered:function(){var e=w.is.multiple(),t=w.is.searchSelection(),n=e&&t,o=t?w.get.query():"",i="string"==typeof o&&o.length>0,s=w.get.searchWidth(),r=""!==o;e&&i&&(w.verbose("Adjusting input width",s,S.glyphWidth),M.css("width",s)),i||n&&r?(w.verbose("Hiding placeholder text"),V.addClass(T.filtered)):(!e||n&&!r)&&(w.verbose("Showing placeholder text"),V.removeClass(T.filtered))},empty:function(){z.addClass(T.empty)},loading:function(){z.addClass(T.loading)},placeholderText:function(e){e=e||w.get.placeholderText(),w.debug("Setting placeholder text",e),w.set.text(e),V.addClass(T.placeholder)},tabbable:function(){w.is.searchSelection()?(w.debug("Added tabindex to searchable dropdown"),M.val("").attr("tabindex",0),W.attr("tabindex",-1)):(w.debug("Added tabindex to dropdown"),void 0===z.attr("tabindex")&&(z.attr("tabindex",0),W.attr("tabindex",-1)))},initialLoad:function(){w.verbose("Setting initial load"),g=!0},activeItem:function(e){S.allowAdditions&&e.filter(F.addition).length>0?e.addClass(T.filtered):e.addClass(T.active)},partialSearch:function(e){var t=w.get.query().length;M.val(e.substr(0,t))},scrollPosition:function(e,t){var n,o,i,s,r,a;n=(e=e||w.get.selectedItem()).closest(F.menu),o=e&&e.length>0,t=void 0!==t&&t,e&&n.length>0&&o&&(e.position().top,n.addClass(T.loading),i=(s=n.scrollTop())-n.offset().top+e.offset().top,t||(a=s+n.height()<i+5,r=i-5<s),w.debug("Scrolling to active item",i),(t||r||a)&&n.scrollTop(i),n.removeClass(T.loading))},text:function(e){"select"!==S.action&&("combo"==S.action?(w.debug("Changing combo button text",e,B),S.preserveHTML?B.html(e):B.text(e)):(e!==w.get.placeholderText()&&V.removeClass(T.placeholder),w.debug("Changing text",e,V),V.removeClass(T.filtered),S.preserveHTML?V.html(e):V.text(e)))},selectedItem:function(e){var t=w.get.choiceValue(e),n=w.get.choiceText(e,!1),o=w.get.choiceText(e,!0);w.debug("Setting user selection to item",e),w.remove.activeItem(),w.set.partialSearch(n),w.set.activeItem(e),w.set.selected(t,e),w.set.text(o)},selectedLetter:function(t){var n,o=X.filter("."+T.selected),i=!1;o.length>0&&w.has.firstLetter(o,t)&&(n=o.nextAll(X).eq(0),w.has.firstLetter(n,t)&&(i=n)),i||X.each(function(){if(w.has.firstLetter(e(this),t))return i=e(this),!1}),i&&(w.verbose("Scrolling to next value with letter",t),w.set.scrollPosition(i),o.removeClass(T.selected),i.addClass(T.selected),S.selectOnKeydown&&w.is.single()&&w.set.selectedItem(i))},direction:function(e){"auto"==S.direction?(w.remove.upward(),w.can.openDownward(e)?w.remove.upward(e):w.set.upward(e),w.is.leftward(e)||w.can.openRightward(e)||w.set.leftward(e)):"upward"==S.direction&&w.set.upward(e)},upward:function(e){(e||z).addClass(T.upward)},leftward:function(e){(e||W).addClass(T.leftward)},value:function(e,t,n){var o=w.escape.value(e),i=H.length>0,s=(w.has.value(e),w.get.values()),r=void 0!==e?String(e):e;if(i){if(!S.allowReselection&&r==s&&(w.verbose("Skipping value update already same value",e,s),!w.is.initialLoad()))return;w.is.single()&&w.has.selectInput()&&w.can.extendSelect()&&(w.debug("Adding user option",e),w.add.optionValue(e)),w.debug("Updating input value",o,s),Q=!0,H.val(o),!1===S.fireOnInit&&w.is.initialLoad()?w.debug("Input native change event ignored on initial load"):w.trigger.change(),Q=!1}else w.verbose("Storing value in metadata",o,H),o!==s&&z.data(P.value,r);!1===S.fireOnInit&&w.is.initialLoad()?w.verbose("No callback on initial load",S.onChange):S.onChange.call($,e,t,n)},active:function(){z.addClass(T.active)},multiple:function(){z.addClass(T.multiple)},visible:function(){z.addClass(T.visible)},exactly:function(e,t){w.debug("Setting selected to exact values"),w.clear(),w.set.selected(e,t)},selected:function(t,n){var o=w.is.multiple();(n=S.allowAdditions?n||w.get.itemWithAdditions(t):n||w.get.item(t))&&(w.debug("Setting selected menu item to",n),w.is.multiple()&&w.remove.searchWidth(),w.is.single()?(w.remove.activeItem(),w.remove.selectedItem()):S.useLabels&&w.remove.selectedItem(),n.each(function(){var t=e(this),i=w.get.choiceText(t),s=w.get.choiceValue(t,i),r=t.hasClass(T.filtered),a=t.hasClass(T.active),l=t.hasClass(T.addition),c=o&&1==n.length;o?!a||l?(S.apiSettings&&S.saveRemoteData&&w.save.remoteData(i,s),S.useLabels?(w.add.value(s,i,t),w.add.label(s,i,c),w.set.activeItem(t),w.filterActive(),w.select.nextAvailable(n)):(w.add.value(s,i,t),w.set.text(w.add.variables(k.count)),w.set.activeItem(t))):r||(w.debug("Selected active value, removing label"),w.remove.selected(s)):(S.apiSettings&&S.saveRemoteData&&w.save.remoteData(i,s),w.set.text(i),w.set.value(s,i,t),t.addClass(T.active).addClass(T.selected))}))}},add:{label:function(t,n,o){var i,s=w.is.searchSelection()?M:V,r=w.escape.value(t);i=e("<a />").addClass(T.label).attr("data-"+P.value,r).html(E.label(r,n)),i=S.onLabelCreate.call(i,r,n),w.has.label(t)?w.debug("Label already exists, skipping",r):(S.label.variation&&i.addClass(S.label.variation),!0===o?(w.debug("Animating in label",i),i.addClass(T.hidden).insertBefore(s).transition(S.label.transition,S.label.duration)):(w.debug("Adding selection label",i),i.insertBefore(s)))},message:function(t){var n=W.children(F.message),o=S.templates.message(w.add.variables(t));n.length>0?n.html(o):n=e("<div/>").html(o).addClass(T.message).appendTo(W)},optionValue:function(t){var n=w.escape.value(t);H.find('option[value="'+w.escape.string(n)+'"]').length>0||(w.disconnect.selectObserver(),w.is.single()&&(w.verbose("Removing previous user addition"),H.find("option."+T.addition).remove()),e("<option/>").prop("value",n).addClass(T.addition).html(t).appendTo(H),w.verbose("Adding user addition as an <option>",t),w.observe.select())},userSuggestion:function(e){var t,n=W.children(F.addition),o=w.get.item(e),i=o&&o.not(F.addition).length,s=n.length>0;S.useLabels&&w.has.maxSelections()||(""===e||i?n.remove():(s?(n.data(P.value,e).data(P.text,e).attr("data-"+P.value,e).attr("data-"+P.text,e).removeClass(T.filtered),S.hideAdditions||(t=S.templates.addition(w.add.variables(k.addResult,e)),n.html(t)),w.verbose("Replacing user suggestion with new value",n)):((n=w.create.userChoice(e)).prependTo(W),w.verbose("Adding item choice to menu corresponding with user choice addition",n)),S.hideAdditions&&!w.is.allFiltered()||n.addClass(T.selected).siblings().removeClass(T.selected),w.refreshItems()))},variables:function(e,t){var n,o,i=-1!==e.search("{count}"),s=-1!==e.search("{maxCount}"),r=-1!==e.search("{term}");return w.verbose("Adding templated variables to message",e),i&&(n=w.get.selectionCount(),e=e.replace("{count}",n)),s&&(n=w.get.selectionCount(),e=e.replace("{maxCount}",S.maxSelections)),r&&(o=t||w.get.query(),e=e.replace("{term}",o)),e},value:function(t,n,o){var i,s=w.get.values();""!==t?(e.isArray(s)?(i=s.concat([t]),i=w.get.uniqueArray(i)):i=[t],w.has.selectInput()?w.can.extendSelect()&&(w.debug("Adding value to select",t,i,H),w.add.optionValue(t)):(i=i.join(S.delimiter),w.debug("Setting hidden input to delimited value",i,H)),!1===S.fireOnInit&&w.is.initialLoad()?w.verbose("Skipping onadd callback on initial load",S.onAdd):S.onAdd.call($,t,n,o),w.set.value(i,t,n,o),w.check.maxSelections()):w.debug("Cannot select blank values from multiselect")}},remove:{active:function(){z.removeClass(T.active)},activeLabel:function(){z.find(F.label).removeClass(T.active)},empty:function(){z.removeClass(T.empty)},loading:function(){z.removeClass(T.loading)},initialLoad:function(){g=!1},upward:function(e){(e||z).removeClass(T.upward)},leftward:function(e){(e||W).removeClass(T.leftward)},visible:function(){z.removeClass(T.visible)},activeItem:function(){X.removeClass(T.active)},filteredItem:function(){S.useLabels&&w.has.maxSelections()||(S.useLabels&&w.is.multiple()?X.not("."+T.active).removeClass(T.filtered):X.removeClass(T.filtered),w.remove.empty())},optionValue:function(e){var t=w.escape.value(e),n=H.find('option[value="'+w.escape.string(t)+'"]');n.length>0&&n.hasClass(T.addition)&&(x&&(x.disconnect(),w.verbose("Temporarily disconnecting mutation observer")),n.remove(),w.verbose("Removing user addition as an <option>",t),x&&x.observe(H[0],{childList:!0,subtree:!0}))},message:function(){W.children(F.message).remove()},searchWidth:function(){M.css("width","")},searchTerm:function(){w.verbose("Cleared search term"),M.val(""),w.set.filtered()},userAddition:function(){X.filter(F.addition).remove()},selected:function(t,n){if(!(n=S.allowAdditions?n||w.get.itemWithAdditions(t):n||w.get.item(t)))return!1;n.each(function(){var t=e(this),n=w.get.choiceText(t),o=w.get.choiceValue(t,n);w.is.multiple()?S.useLabels?(w.remove.value(o,n,t),w.remove.label(o)):(w.remove.value(o,n,t),0===w.get.selectionCount()?w.set.placeholderText():w.set.text(w.add.variables(k.count))):w.remove.value(o,n,t),t.removeClass(T.filtered).removeClass(T.active),S.useLabels&&t.removeClass(T.selected)})},selectedItem:function(){X.removeClass(T.selected)},value:function(e,t,n){var o,i=w.get.values();w.has.selectInput()?(w.verbose("Input is <select> removing selected option",e),o=w.remove.arrayValue(e,i),w.remove.optionValue(e)):(w.verbose("Removing from delimited values",e),o=(o=w.remove.arrayValue(e,i)).join(S.delimiter)),!1===S.fireOnInit&&w.is.initialLoad()?w.verbose("No callback on initial load",S.onRemove):S.onRemove.call($,e,t,n),w.set.value(o,t,n),w.check.maxSelections()},arrayValue:function(t,n){return e.isArray(n)||(n=[n]),n=e.grep(n,function(e){return t!=e}),w.verbose("Removed value from delimited string",t,n),n},label:function(e,t){var n=z.find(F.label).filter("[data-"+P.value+'="'+w.escape.string(e)+'"]');w.verbose("Removing label",n),n.remove()},activeLabels:function(e){e=e||z.find(F.label).filter("."+T.active),w.verbose("Removing active label selections",e),w.remove.labels(e)},labels:function(t){t=t||z.find(F.label),w.verbose("Removing labels",t),t.each(function(){var t=e(this),n=t.data(P.value),o=void 0!==n?String(n):n,i=w.is.userValue(o);!1!==S.onLabelRemove.call(t,n)?(w.remove.message(),i?(w.remove.value(o),w.remove.label(o)):w.remove.selected(o)):w.debug("Label remove callback cancelled removal")})},tabbable:function(){w.is.searchSelection()?(w.debug("Searchable dropdown initialized"),M.removeAttr("tabindex"),W.removeAttr("tabindex")):(w.debug("Simple selection dropdown initialized"),z.removeAttr("tabindex"),W.removeAttr("tabindex"))}},has:{menuSearch:function(){return w.has.search()&&M.closest(W).length>0},search:function(){return M.length>0},sizer:function(){return N.length>0},selectInput:function(){return H.is("select")},minCharacters:function(e){return!S.minCharacters||(e=void 0!==e?String(e):String(w.get.query())).length>=S.minCharacters},firstLetter:function(e,t){var n,o;return!(!e||0===e.length||"string"!=typeof t)&&(n=w.get.choiceText(e,!1),t=t.toLowerCase(),o=String(n).charAt(0).toLowerCase(),t==o)},input:function(){return H.length>0},items:function(){return X.length>0},menu:function(){return W.length>0},message:function(){return 0!==W.children(F.message).length},label:function(e){var t=w.escape.value(e);return z.find(F.label).filter("[data-"+P.value+'="'+w.escape.string(t)+'"]').length>0},maxSelections:function(){return S.maxSelections&&w.get.selectionCount()>=S.maxSelections},allResultsFiltered:function(){var e=X.not(F.addition);return e.filter(F.unselectable).length===e.length},userSuggestion:function(){return W.children(F.addition).length>0},query:function(){return""!==w.get.query()},value:function(t){var n=w.get.values();return!!(e.isArray(n)?n&&-1!==e.inArray(t,n):n==t)}},is:{active:function(){return z.hasClass(T.active)},bubbledLabelClick:function(t){return e(t.target).is("select, input")&&z.closest("label").length>0},bubbledIconClick:function(t){return e(t.target).closest(U).length>0},alreadySetup:function(){return z.is("select")&&z.parent(F.dropdown).length>0&&0===z.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):W.transition&&W.transition("is animating")},leftward:function(e){return(e||W).hasClass(T.leftward)},disabled:function(){return z.hasClass(T.disabled)},focused:function(){return n.activeElement===z[0]},focusedOnSearch:function(){return n.activeElement===M[0]},allFiltered:function(){return(w.is.multiple()||w.has.search())&&!(0==S.hideAdditions&&w.has.userSuggestion())&&!w.has.message()&&w.has.allResultsFiltered()},hidden:function(e){return!w.is.visible(e)},initialLoad:function(){return g},inObject:function(t,n){var o=!1;return e.each(n,function(e,n){if(n==t)return o=!0,!0}),o},multiple:function(){return z.hasClass(T.multiple)},remote:function(){return S.apiSettings&&w.can.useAPI()},single:function(){return!w.is.multiple()},selectMutation:function(t){var n=!1;return e.each(t,function(t,o){if(o.target&&e(o.target).is("select"))return n=!0,!0}),n},search:function(){return z.hasClass(T.search)},searchSelection:function(){return w.has.search()&&1===M.parent(F.dropdown).length},selection:function(){return z.hasClass(T.selection)},userValue:function(t){return-1!==e.inArray(t,w.get.userValues())},upward:function(e){return(e||z).hasClass(T.upward)},visible:function(e){return e?e.hasClass(T.visible):W.hasClass(T.visible)},verticallyScrollableContext:function(){var e=j.get(0)!==t&&j.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=j.get(0)!==t&&j.css("overflow-X");return"auto"==e||"scroll"==e}},can:{activate:function(e){return!!S.useLabels||(!w.has.maxSelections()||!(!w.has.maxSelections()||!e.hasClass(T.active)))},openDownward:function(e){var t,n=e||W,o=!0,i={};return n.addClass(T.loading),t={context:{scrollTop:j.scrollTop(),height:j.outerHeight()},menu:{offset:n.offset(),height:n.outerHeight()}},w.is.verticallyScrollableContext()&&(t.menu.offset.top+=t.context.scrollTop),(i={above:t.context.scrollTop<=t.menu.offset.top-t.menu.height,below:t.context.scrollTop+t.context.height>=t.menu.offset.top+t.menu.height}).below?(w.verbose("Dropdown can fit in context downward",i),o=!0):i.below||i.above?(w.verbose("Dropdown cannot fit below, opening upward",i),o=!1):(w.verbose("Dropdown cannot fit in either direction, favoring downward",i),o=!0),n.removeClass(T.loading),o},openRightward:function(e){var t,n=e||W,o=!0,i=!1;return n.addClass(T.loading),t={context:{scrollLeft:j.scrollLeft(),width:j.outerWidth()},menu:{offset:n.offset(),width:n.outerWidth()}},w.is.horizontallyScrollableContext()&&(t.menu.offset.left+=t.context.scrollLeft),(i=t.menu.offset.left+t.menu.width>=t.context.scrollLeft+t.context.width)&&(w.verbose("Dropdown cannot fit in context rightward",i),o=!1),n.removeClass(T.loading),o},click:function(){return l||"click"==S.on},extendSelect:function(){return S.allowAdditions||S.apiSettings},show:function(){return!w.is.disabled()&&(w.has.items()||w.has.message())},useAPI:function(){return void 0!==e.fn.api}},animate:{show:function(t,n){var o,i=n||W,s=n?function(){}:function(){w.hideSubMenus(),w.hideOthers(),w.set.active()};t=e.isFunction(t)?t:function(){},w.verbose("Doing menu show animation",i),w.set.direction(n),o=w.get.transition(n),w.is.selection()&&w.set.scrollPosition(w.get.selectedItem(),!0),(w.is.hidden(i)||w.is.animating(i))&&("none"==o?(s(),i.transition("show"),t.call($)):void 0!==e.fn.transition&&z.transition("is supported")?i.transition({animation:o+" in",debug:S.debug,verbose:S.verbose,duration:S.duration,queue:!0,onStart:s,onComplete:function(){t.call($)}}):w.error(D.noTransition,o))},hide:function(t,n){var o=n||W,i=(n?S.duration:S.duration,n?function(){}:function(){w.can.click()&&w.unbind.intent(),w.remove.active()}),s=w.get.transition(n);t=e.isFunction(t)?t:function(){},(w.is.visible(o)||w.is.animating(o))&&(w.verbose("Doing menu hide animation",o),"none"==s?(i(),o.transition("hide"),t.call($)):void 0!==e.fn.transition&&z.transition("is supported")?o.transition({animation:s+" out",duration:S.duration,debug:S.debug,verbose:S.verbose,queue:!0,onStart:i,onComplete:function(){t.call($)}}):w.error(D.transition))}},hideAndClear:function(){w.remove.searchTerm(),w.has.maxSelections()||(w.has.search()?w.hide(function(){w.remove.filteredItem()}):w.hide())},delay:{show:function(){w.verbose("Delaying show event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.show,S.delay.show)},hide:function(){w.verbose("Delaying hide event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.hide,S.delay.hide)}},escape:{value:function(t){var n=e.isArray(t),o="string"==typeof t,i=!o&&!n,s=o&&-1!==t.search(O.quote),r=[];return i||!s?t:(w.debug("Encoding quote values for use in select",t),n?(e.each(t,function(e,t){r.push(t.replace(O.quote,"&quot;"))}),r):t.replace(O.quote,"&quot;"))},string:function(e){return(e=String(e)).replace(O.escape,"\\$&")}},setting:function(t,n){if(w.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,S,t);else{if(void 0===n)return S[t];e.isPlainObject(S[t])?e.extend(!0,S[t],n):S[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,w,t);else{if(void 0===n)return w[t];w[t]=n}},debug:function(){!S.silent&&S.debug&&(S.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,S.name+":"),w.debug.apply(console,arguments)))},verbose:function(){!S.silent&&S.verbose&&S.debug&&(S.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,S.name+":"),w.verbose.apply(console,arguments)))},error:function(){S.silent||(w.error=Function.prototype.bind.call(console.error,console,S.name+":"),w.error.apply(console,arguments))},performance:{log:function(e){var t,n;S.performance&&(n=(t=(new Date).getTime())-(c||t),c=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:$,"Execution Time":n})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var t=S.name+":",n=0;c=!1,clearTimeout(w.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,o){var s,r,a,l=Y;return n=n||m,o=$||o,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,o){var i=n!=s?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=s)l=l[i];else{if(void 0!==l[i])return r=l[i],!1;if(!e.isPlainObject(l[o])||n==s)return void 0!==l[o]?(r=l[o],!1):(w.error(D.method,t),!1);l=l[o]}})),e.isFunction(r)?a=r.apply(o,n):void 0!==r&&(a=r),e.isArray(i)?i.push(a):void 0!==i?i=[i,a]:void 0!==a&&(i=a),r}},f?(void 0===Y&&w.initialize(),w.invoke(d)):(void 0!==Y&&Y.invoke("destroy"),w.initialize())}),void 0!==i?i:s},e.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:t,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(e,t,n){},onAdd:function(e,t,n){},onRemove:function(e,t,n){},onLabelSelect:function(e){},onLabelCreate:function(t,n){return e(this)},onLabelRemove:function(e){return!0},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},e.fn.dropdown.settings.templates={dropdown:function(t){var n=t.placeholder||!1,o=(t.values,"");return o+='<i class="dropdown icon"></i>',t.placeholder?o+='<div class="default text">'+n+"</div>":o+='<div class="text"></div>',o+='<div class="menu">',e.each(t.values,function(e,t){o+=t.disabled?'<div class="disabled item" data-value="'+t.value+'">'+t.name+"</div>":'<div class="item" data-value="'+t.value+'">'+t.name+"</div>"}),o+="</div>"},menu:function(t,n){var o=t[n.values]||{},i="";return e.each(o,function(e,t){var o=t[n.text]?'data-text="'+t[n.text]+'"':"",s=t[n.disabled]?"disabled ":"";i+='<div class="'+s+'item" data-value="'+t[n.value]+'"'+o+">",i+=t[n.name],i+="</div>"}),i},label:function(e,t){return t+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}}(jQuery,window,document),function(e,t,n,o){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(o){var i,s=e(this),r=s.selector||"",a=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return e(this).each(function(){var f,m=e.isPlainObject(o)?e.extend(!0,{},e.fn.search.settings,o):e.extend({},e.fn.search.settings),v=m.className,g=m.metadata,h=m.regExp,p=m.fields,b=m.selector,y=m.error,x=m.namespace,C="."+x,w=x+"-module",S=e(this),T=S.find(b.prompt),k=S.find(b.searchButton),R=S.find(b.results),A=S.find(b.result),P=S.find(b.category),q=this,O=S.data(w),F=!1,D=!1;f={initialize:function(){f.verbose("Initializing module"),f.determine.searchFields(),f.bind.events(),f.set.type(),f.create.results(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),O=f,S.data(w,f)},destroy:function(){f.verbose("Destroying instance"),S.off(C).removeData(w)},refresh:function(){f.debug("Refreshing selector cache"),T=S.find(b.prompt),k=S.find(b.searchButton),P=S.find(b.category),R=S.find(b.results),A=S.find(b.result)},refreshResults:function(){R=S.find(b.results),A=S.find(b.result)},bind:{events:function(){f.verbose("Binding events to search"),m.automatic&&(S.on(f.get.inputEvent()+C,b.prompt,f.event.input),T.attr("autocomplete","off")),S.on("focus"+C,b.prompt,f.event.focus).on("blur"+C,b.prompt,f.event.blur).on("keydown"+C,b.prompt,f.handleKeyboard).on("click"+C,b.searchButton,f.query).on("mousedown"+C,b.results,f.event.result.mousedown).on("mouseup"+C,b.results,f.event.result.mouseup).on("click"+C,b.result,f.event.result.click)}},determine:{searchFields:function(){o&&void 0!==o.searchFields&&(m.searchFields=o.searchFields)}},event:{input:function(){m.searchDelay?(clearTimeout(f.timer),f.timer=setTimeout(function(){f.is.focused()&&f.query()},m.searchDelay)):f.query()},focus:function(){f.set.focus(),m.searchOnFocus&&f.has.minimumCharacters()&&f.query(function(){f.can.show()&&f.showResults()})},blur:function(e){var t=function(){f.cancel.query(),f.remove.focus(),f.timer=setTimeout(f.hideResults,m.hideDelay)};n.activeElement===this||(D=!1,f.resultsClicked?(f.debug("Determining if user action caused search to close"),S.one("click.close"+C,b.results,function(e){f.is.inMessage(e)||F?T.focus():(F=!1,f.is.animating()||f.is.hidden()||t())})):(f.debug("Input blurred without user action, closing results"),t()))},result:{mousedown:function(){f.resultsClicked=!0},mouseup:function(){f.resultsClicked=!1},click:function(n){f.debug("Search result selected");var o=e(this),i=o.find(b.title).eq(0),s=o.is("a[href]")?o:o.find("a[href]").eq(0),r=s.attr("href")||!1,a=s.attr("target")||!1,l=(i.html(),i.length>0&&i.text()),c=f.get.results(),u=o.data(g.result)||f.get.result(l,c);if(e.isFunction(m.onSelect)&&!1===m.onSelect.call(q,u,c))return f.debug("Custom onSelect callback cancelled default select action"),void(F=!0);f.hideResults(),l&&f.set.value(l),r&&(f.verbose("Opening search link found in result",s),"_blank"==a||n.ctrlKey?t.open(r):t.location.href=r)}}},handleKeyboard:function(e){var t,n=S.find(b.result),o=S.find(b.category),i=n.filter("."+v.active),s=n.index(i),r=n.length,a=i.length>0,l=e.which,c={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40};if(l==c.escape&&(f.verbose("Escape key pressed, blurring search field"),f.hideResults(),D=!0),f.is.visible())if(l==c.enter){if(f.verbose("Enter key pressed, selecting active result"),n.filter("."+v.active).length>0)return f.event.result.click.call(n.filter("."+v.active),e),e.preventDefault(),!1}else l==c.upArrow&&a?(f.verbose("Up key pressed, changing active result"),t=s-1<0?s:s-1,o.removeClass(v.active),n.removeClass(v.active).eq(t).addClass(v.active).closest(o).addClass(v.active),e.preventDefault()):l==c.downArrow&&(f.verbose("Down key pressed, changing active result"),t=s+1>=r?s:s+1,o.removeClass(v.active),n.removeClass(v.active).eq(t).addClass(v.active).closest(o).addClass(v.active),e.preventDefault());else l==c.enter&&(f.verbose("Enter key pressed, executing query"),f.query(),f.set.buttonPressed(),T.one("keyup",f.remove.buttonFocus))},setup:{api:function(t,n){var o={debug:m.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){f.parse.response.call(q,e,t),n()},onFailure:function(){f.displayMessage(y.serverError),n()},onAbort:function(e){},onError:f.error};e.extend(!0,o,m.apiSettings),f.verbose("Setting up API request",o),S.api(o)}},can:{useAPI:function(){return void 0!==e.fn.api},show:function(){return f.is.focused()&&!f.is.visible()&&!f.is.empty()},transition:function(){return m.transition&&void 0!==e.fn.transition&&S.transition("is supported")}},is:{animating:function(){return R.hasClass(v.animating)},hidden:function(){return R.hasClass(v.hidden)},inMessage:function(t){if(t.target){var o=e(t.target);return e.contains(n.documentElement,t.target)&&o.closest(b.message).length>0}},empty:function(){return""===R.html()},visible:function(){return R.filter(":visible").length>0},focused:function(){return T.filter(":focus").length>0}},get:{inputEvent:function(){var e=T[0];return void 0!==e&&void 0!==e.oninput?"input":void 0!==e&&void 0!==e.onpropertychange?"propertychange":"keyup"},value:function(){return T.val()},results:function(){return S.data(g.results)},result:function(t,n){var o=["title","id"],i=!1;return t=void 0!==t?t:f.get.value(),n=void 0!==n?n:f.get.results(),"category"===m.type?(f.debug("Finding result that matches",t),e.each(n,function(n,s){if(e.isArray(s.results)&&(i=f.search.object(t,s.results,o)[0]))return!1})):(f.debug("Finding result in results object",t),i=f.search.object(t,n,o)[0]),i||!1}},select:{firstResult:function(){f.verbose("Selecting first result"),A.first().addClass(v.active)}},set:{focus:function(){S.addClass(v.focus)},loading:function(){S.addClass(v.loading)},value:function(e){f.verbose("Setting search input value",e),T.val(e)},type:function(e){e=e||m.type,"category"==m.type&&S.addClass(m.type)},buttonPressed:function(){k.addClass(v.pressed)}},remove:{loading:function(){S.removeClass(v.loading)},focus:function(){S.removeClass(v.focus)},buttonPressed:function(){k.removeClass(v.pressed)}},query:function(t){t=e.isFunction(t)?t:function(){};var n=f.get.value(),o=f.read.cache(n);t=t||function(){},f.has.minimumCharacters()?(o?(f.debug("Reading result from cache",n),f.save.results(o.results),f.addResults(o.html),f.inject.id(o.results),t()):(f.debug("Querying for",n),e.isPlainObject(m.source)||e.isArray(m.source)?(f.search.local(n),t()):f.can.useAPI()?f.search.remote(n,t):(f.error(y.source),t())),m.onSearchQuery.call(q,n)):f.hideResults()},search:{local:function(e){var t,n=f.search.object(e,m.content);f.set.loading(),f.save.results(n),f.debug("Returned local search results",n),t=f.generateResults({results:n}),f.remove.loading(),f.addResults(t),f.inject.id(n),f.write.cache(e,{html:t,results:n})},remote:function(t,n){n=e.isFunction(n)?n:function(){},S.api("is loading")&&S.api("abort"),f.setup.api(t,n),S.api("query")},object:function(t,n,o){var i=[],s=[],r=t.toString().replace(h.escape,"\\$&"),a=new RegExp(h.beginsWith+r,"i"),l=function(t,n){var o=-1==e.inArray(n,i),r=-1==e.inArray(n,s);o&&r&&t.push(n)};return n=n||m.source,o=void 0!==o?o:m.searchFields,e.isArray(o)||(o=[o]),void 0===n||!1===n?(f.error(y.source),[]):(e.each(o,function(o,r){e.each(n,function(e,n){"string"==typeof n[r]&&(-1!==n[r].search(a)?l(i,n):m.searchFullText&&f.fuzzySearch(t,n[r])&&l(s,n))})}),e.merge(i,s))}},fuzzySearch:function(e,t){var n=t.length,o=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),o>n)return!1;if(o===n)return e===t;e:for(var i=0,s=0;i<o;i++){for(var r=e.charCodeAt(i);s<n;)if(t.charCodeAt(s++)===r)continue e;return!1}return!0},parse:{response:function(e,t){var n=f.generateResults(e);f.verbose("Parsing server response",e),void 0!==e&&void 0!==t&&void 0!==e[p.results]&&(f.addResults(n),f.inject.id(e[p.results]),f.write.cache(t,{html:n,results:e[p.results]}),f.save.results(e[p.results]))}},cancel:{query:function(){f.can.useAPI()&&S.api("abort")}},has:{minimumCharacters:function(){return f.get.value().length>=m.minCharacters},results:function(){return 0!==R.length&&""!=R.html()}},clear:{cache:function(e){var t=S.data(g.cache);e?e&&t&&t[e]&&(f.debug("Removing value from cache",e),delete t[e],S.data(g.cache,t)):(f.debug("Clearing cache",e),S.removeData(g.cache))}},read:{cache:function(e){var t=S.data(g.cache);return!!m.cache&&(f.verbose("Checking cache for generated html for query",e),"object"==typeof t&&void 0!==t[e]&&t[e])}},create:{id:function(e,t){var n,o=e+1;return void 0!==t?(n=String.fromCharCode(97+t)+o,f.verbose("Creating category result id",n)):(n=o,f.verbose("Creating result id",n)),n},results:function(){0===R.length&&(R=e("<div />").addClass(v.results).appendTo(S))}},inject:{result:function(e,t,n){f.verbose("Injecting result into results");var o=void 0!==n?R.children().eq(n).children(b.result).eq(t):R.children(b.result).eq(t);f.verbose("Injecting results metadata",o),o.data(g.result,e)},id:function(t){f.debug("Injecting unique ids into results");var n=0,o=0;return"category"===m.type?e.each(t,function(t,i){o=0,e.each(i.results,function(e,t){var s=i.results[e];void 0===s.id&&(s.id=f.create.id(o,n)),f.inject.result(s,o,n),o++}),n++}):e.each(t,function(e,n){var i=t[e];void 0===i.id&&(i.id=f.create.id(o)),f.inject.result(i,o),o++}),t}},save:{results:function(e){f.verbose("Saving current search results to metadata",e),S.data(g.results,e)}},write:{cache:function(e,t){var n=void 0!==S.data(g.cache)?S.data(g.cache):{};m.cache&&(f.verbose("Writing generated html to cache",e,t),n[e]=t,S.data(g.cache,n))}},addResults:function(t){if(e.isFunction(m.onResultsAdd)&&!1===m.onResultsAdd.call(R,t))return f.debug("onResultsAdd callback cancelled default action"),!1;t?(R.html(t),f.refreshResults(),m.selectFirstResult&&f.select.firstResult(),f.showResults()):f.hideResults(function(){R.empty()})},showResults:function(t){t=e.isFunction(t)?t:function(){},D||!f.is.visible()&&f.has.results()&&(f.can.transition()?(f.debug("Showing results with css animations"),R.transition({animation:m.transition+" in",debug:m.debug,verbose:m.verbose,duration:m.duration,onComplete:function(){t()},queue:!0})):(f.debug("Showing results with javascript"),R.stop().fadeIn(m.duration,m.easing)),m.onResultsOpen.call(R))},hideResults:function(t){t=e.isFunction(t)?t:function(){},f.is.visible()&&(f.can.transition()?(f.debug("Hiding results with css animations"),R.transition({animation:m.transition+" out",debug:m.debug,verbose:m.verbose,duration:m.duration,onComplete:function(){t()},queue:!0})):(f.debug("Hiding results with javascript"),R.stop().fadeOut(m.duration,m.easing)),m.onResultsClose.call(R))},generateResults:function(t){f.debug("Generating html from response",t);var n=m.templates[m.type],o=e.isPlainObject(t[p.results])&&!e.isEmptyObject(t[p.results]),i=e.isArray(t[p.results])&&t[p.results].length>0,s="";return o||i?(m.maxResults>0&&(o?"standard"==m.type&&f.error(y.maxResults):t[p.results]=t[p.results].slice(0,m.maxResults)),e.isFunction(n)?s=n(t,p):f.error(y.noTemplate,!1)):m.showNoResults&&(s=f.displayMessage(y.noResults,"empty")),m.onResults.call(q,t),s},displayMessage:function(e,t){return t=t||"standard",f.debug("Displaying message",e,t),f.addResults(m.templates.message(e,t)),m.templates.message(e,t)},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(void 0===n)return m[t];m[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];f[t]=n}},debug:function(){!m.silent&&m.debug&&(m.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,m.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!m.silent&&m.verbose&&m.debug&&(m.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),f.verbose.apply(console,arguments)))},error:function(){m.silent||(f.error=Function.prototype.bind.call(console.error,console,m.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n;m.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:q,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=m.name+":",n=0;a=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),s.length>1&&(t+=" ("+s.length+")"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,o){var s,r,a,l=O;return n=n||d,o=q||o,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,o){var i=n!=s?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=s)l=l[i];else{if(void 0!==l[i])return r=l[i],!1;if(!e.isPlainObject(l[o])||n==s)return void 0!==l[o]&&(r=l[o],!1);l=l[o]}})),e.isFunction(r)?a=r.apply(o,n):void 0!==r&&(a=r),e.isArray(i)?i.push(a):void 0!==i?i=[i,a]:void 0!==a&&(i=a),r}},u?(void 0===O&&f.initialize(),f.invoke(c)):(void 0!==O&&O.invoke("destroy"),f.initialize())}),void 0!==i?i:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t=/[&<>"'`]/g,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(t,function(e){return n[e]}):e},message:function(e,t){var n="";return void 0!==e&&void 0!==t&&(n+='<div class="message '+t+'">',n+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",n+="</div>"),n},category:function(t,n){var o="";e.fn.search.settings.templates.escape;return void 0!==t[n.categoryResults]&&(e.each(t[n.categoryResults],function(t,i){void 0!==i[n.results]&&i.results.length>0&&(o+='<div class="category">',void 0!==i[n.categoryName]&&(o+='<div class="name">'+i[n.categoryName]+"</div>"),e.each(i.results,function(e,t){t[n.url]?o+='<a class="result" href="'+t[n.url]+'">':o+='<a class="result">',void 0!==t[n.image]&&(o+='<div class="image"> <img src="'+t[n.image]+'"></div>'),o+='<div class="content">',void 0!==t[n.price]&&(o+='<div class="price">'+t[n.price]+"</div>"),void 0!==t[n.title]&&(o+='<div class="title">'+t[n.title]+"</div>"),void 0!==t[n.description]&&(o+='<div class="description">'+t[n.description]+"</div>"),o+="</div>",o+="</a>"}),o+="</div>")}),t[n.action]&&(o+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),o)},standard:function(t,n){var o="";return void 0!==t[n.results]&&(e.each(t[n.results],function(e,t){t[n.url]?o+='<a class="result" href="'+t[n.url]+'">':o+='<a class="result">',void 0!==t[n.image]&&(o+='<div class="image"> <img src="'+t[n.image]+'"></div>'),o+='<div class="content">',void 0!==t[n.price]&&(o+='<div class="price">'+t[n.price]+"</div>"),void 0!==t[n.title]&&(o+='<div class="title">'+t[n.title]+"</div>"),void 0!==t[n.description]&&(o+='<div class="description">'+t[n.description]+"</div>"),o+="</div>",o+="</a>"}),t[n.action]&&(o+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),o)}}}}(jQuery,window,document),function(e,t,n,o){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sidebar=function(o){var i,s=e(this),r=e(t),a=e(n),l=e("html"),c=e("head"),u=s.selector||"",d=(new Date).getTime(),f=[],m=arguments[0],v="string"==typeof m,g=[].slice.call(arguments,1),h=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return s.each(function(){var s,p,b,y,x,C,w=e.isPlainObject(o)?e.extend(!0,{},e.fn.sidebar.settings,o):e.extend({},e.fn.sidebar.settings),S=w.selector,T=w.className,k=w.namespace,R=w.regExp,A=w.error,P="."+k,q="module-"+k,O=e(this),F=e(w.context),D=O.children(S.sidebar),E=F.children(S.fixed),I=F.children(S.pusher),L=this,z=O.data(q);C={initialize:function(){C.debug("Initializing sidebar",o),C.create.id(),x=C.get.transitionEvent(),w.delaySetup?h(C.setup.layout):C.setup.layout(),h(function(){C.setup.cache()}),C.instantiate()},instantiate:function(){C.verbose("Storing instance of module",C),z=C,O.data(q,C)},create:{id:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),p="."+b,C.verbose("Creating unique id for element",b)}},destroy:function(){C.verbose("Destroying previous module for",O),O.off(P).removeData(q),C.is.ios()&&C.remove.ios(),F.off(p),r.off(p),a.off(p)},event:{clickaway:function(e){var t=I.find(e.target).length>0||I.is(e.target),n=F.is(e.target);t&&(C.verbose("User clicked on dimmed page"),C.hide()),n&&(C.verbose("User clicked on dimmable context (scaled out page)"),C.hide())},touch:function(e){},containScroll:function(e){L.scrollTop<=0&&(L.scrollTop=1),L.scrollTop+L.offsetHeight>=L.scrollHeight&&(L.scrollTop=L.scrollHeight-L.offsetHeight-1)},scroll:function(t){0===e(t.target).closest(S.sidebar).length&&t.preventDefault()}},bind:{clickaway:function(){C.verbose("Adding clickaway events to context",F),w.closable&&F.on("click"+p,C.event.clickaway).on("touchend"+p,C.event.clickaway)},scrollLock:function(){w.scrollLock&&(C.debug("Disabling page scroll"),r.on("DOMMouseScroll"+p,C.event.scroll)),C.verbose("Adding events to contain sidebar scroll"),a.on("touchmove"+p,C.event.touch),O.on("scroll"+P,C.event.containScroll)}},unbind:{clickaway:function(){C.verbose("Removing clickaway events from context",F),F.off(p)},scrollLock:function(){C.verbose("Removing scroll lock from page"),a.off(p),r.off(p),O.off("scroll"+P)}},add:{inlineCSS:function(){var t,n=C.cache.width||O.outerWidth(),o=C.cache.height||O.outerHeight(),i=C.is.rtl(),r=C.get.direction(),a={left:n,right:-n,top:o,bottom:-o};i&&(C.verbose("RTL detected, flipping widths"),a.left=-n,a.right=n),t="<style>","left"===r||"right"===r?(C.debug("Adding CSS rules for animation distance",n),t+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d("+a[r]+"px, 0, 0);           transform: translate3d("+a[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(t+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+a[r]+"px, 0);           transform: translate3d(0, "+a[r]+"px, 0); }"),C.is.ie()&&("left"===r||"right"===r?(C.debug("Adding CSS rules for animation distance",n),t+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+a[r]+"px, 0, 0);           transform: translate3d("+a[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(t+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+a[r]+"px, 0);           transform: translate3d(0, "+a[r]+"px, 0); }"),t+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),s=e(t+="</style>").appendTo(c),C.debug("Adding sizing css to head",s)}},refresh:function(){C.verbose("Refreshing selector cache"),F=e(w.context),D=F.children(S.sidebar),I=F.children(S.pusher),E=F.children(S.fixed),C.clear.cache()},refreshSidebars:function(){C.verbose("Refreshing other sidebars"),D=F.children(S.sidebar)},repaint:function(){C.verbose("Forcing repaint event"),L.style.display="none";L.offsetHeight;L.scrollTop=L.scrollTop,L.style.display=""},setup:{cache:function(){C.cache={width:O.outerWidth(),height:O.outerHeight(),rtl:"rtl"==O.css("direction")}},layout:function(){0===F.children(S.pusher).length&&(C.debug("Adding wrapper element for sidebar"),C.error(A.pusher),I=e('<div class="pusher" />'),F.children().not(S.omitted).not(D).wrapAll(I),C.refresh()),0!==O.nextAll(S.pusher).length&&O.nextAll(S.pusher)[0]===I[0]||(C.debug("Moved sidebar to correct parent element"),C.error(A.movedSidebar,L),O.detach().prependTo(F),C.refresh()),C.clear.cache(),C.set.pushable(),C.set.direction()}},attachEvents:function(t,n){var o=e(t);n=e.isFunction(C[n])?C[n]:C.toggle,o.length>0?(C.debug("Attaching sidebar events to element",t,n),o.on("click"+P,n)):C.error(A.notFound,t)},show:function(t){if(t=e.isFunction(t)?t:function(){},C.is.hidden()){if(C.refreshSidebars(),w.overlay&&(C.error(A.overlay),w.transition="overlay"),C.refresh(),C.othersActive())if(C.debug("Other sidebars currently visible"),w.exclusive){if("overlay"!=w.transition)return void C.hideOthers(C.show);C.hideOthers()}else w.transition="overlay";C.pushPage(function(){t.call(L),w.onShow.call(L)}),w.onChange.call(L),w.onVisible.call(L)}else C.debug("Sidebar is already visible")},hide:function(t){t=e.isFunction(t)?t:function(){},(C.is.visible()||C.is.animating())&&(C.debug("Hiding sidebar",t),C.refreshSidebars(),C.pullPage(function(){t.call(L),w.onHidden.call(L)}),w.onChange.call(L),w.onHide.call(L))},othersAnimating:function(){return D.not(O).filter("."+T.animating).length>0},othersVisible:function(){return D.not(O).filter("."+T.visible).length>0},othersActive:function(){return C.othersVisible()||C.othersAnimating()},hideOthers:function(e){var t=D.not(O).filter("."+T.visible),n=t.length,o=0;e=e||function(){},t.sidebar("hide",function(){++o==n&&e()})},toggle:function(){C.verbose("Determining toggled direction"),C.is.hidden()?C.show():C.hide()},pushPage:function(t){var n,o,i,s=C.get.transition(),r="overlay"===s||C.othersActive()?O:I;t=e.isFunction(t)?t:function(){},"scale down"==w.transition&&C.scrollToTop(),C.set.transition(s),C.repaint(),n=function(){C.bind.clickaway(),C.add.inlineCSS(),C.set.animating(),C.set.visible()},o=function(){C.set.dimmed()},i=function(e){e.target==r[0]&&(r.off(x+p,i),C.remove.animating(),C.bind.scrollLock(),t.call(L))},r.off(x+p),r.on(x+p,i),h(n),w.dimPage&&!C.othersVisible()&&h(o)},pullPage:function(t){var n,o,i=C.get.transition(),s="overlay"==i||C.othersActive()?O:I;t=e.isFunction(t)?t:function(){},C.verbose("Removing context push state",C.get.direction()),C.unbind.clickaway(),C.unbind.scrollLock(),n=function(){C.set.transition(i),C.set.animating(),C.remove.visible(),w.dimPage&&!C.othersVisible()&&I.removeClass(T.dimmed)},o=function(e){e.target==s[0]&&(s.off(x+p,o),C.remove.animating(),C.remove.transition(),C.remove.inlineCSS(),("scale down"==i||w.returnScroll&&C.is.mobile())&&C.scrollBack(),t.call(L))},s.off(x+p),s.on(x+p,o),h(n)},scrollToTop:function(){C.verbose("Scrolling to top of page to avoid animation issues"),y=e(t).scrollTop(),O.scrollTop(0),t.scrollTo(0,0)},scrollBack:function(){C.verbose("Scrolling back to original page position"),t.scrollTo(0,y)},clear:{cache:function(){C.verbose("Clearing cached dimensions"),C.cache={}}},set:{ios:function(){l.addClass(T.ios)},pushed:function(){F.addClass(T.pushed)},pushable:function(){F.addClass(T.pushable)},dimmed:function(){I.addClass(T.dimmed)},active:function(){O.addClass(T.active)},animating:function(){O.addClass(T.animating)},transition:function(e){e=e||C.get.transition(),O.addClass(e)},direction:function(e){e=e||C.get.direction(),O.addClass(T[e])},visible:function(){O.addClass(T.visible)},overlay:function(){O.addClass(T.overlay)}},remove:{inlineCSS:function(){C.debug("Removing inline css styles",s),s&&s.length>0&&s.remove()},ios:function(){l.removeClass(T.ios)},pushed:function(){F.removeClass(T.pushed)},pushable:function(){F.removeClass(T.pushable)},active:function(){O.removeClass(T.active)},animating:function(){O.removeClass(T.animating)},transition:function(e){e=e||C.get.transition(),O.removeClass(e)},direction:function(e){e=e||C.get.direction(),O.removeClass(T[e])},visible:function(){O.removeClass(T.visible)},overlay:function(){O.removeClass(T.overlay)}},get:{direction:function(){return O.hasClass(T.top)?T.top:O.hasClass(T.right)?T.right:O.hasClass(T.bottom)?T.bottom:T.left},transition:function(){var e,t=C.get.direction();return e=C.is.mobile()?"auto"==w.mobileTransition?w.defaultTransition.mobile[t]:w.mobileTransition:"auto"==w.transition?w.defaultTransition.computer[t]:w.transition,C.verbose("Determined transition",e),e},transitionEvent:function(){var e,t=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(void 0!==t.style[e])return o[e]}},is:{ie:function(){var e=!t.ActiveXObject&&"ActiveXObject"in t,n="ActiveXObject"in t;return e||n},ios:function(){var e=navigator.userAgent,t=e.match(R.ios),n=e.match(R.mobileChrome);return!(!t||n)&&(C.verbose("Browser was found to be iOS",e),!0)},mobile:function(){var e=navigator.userAgent;return e.match(R.mobile)?(C.verbose("Browser was found to be mobile",e),!0):(C.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!C.is.visible()},visible:function(){return O.hasClass(T.visible)},open:function(){return C.is.visible()},closed:function(){return C.is.hidden()},vertical:function(){return O.hasClass(T.top)},animating:function(){return F.hasClass(T.animating)},rtl:function(){return void 0===C.cache.rtl&&(C.cache.rtl="rtl"==O.css("direction")),C.cache.rtl}},setting:function(t,n){if(C.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,w,t);else{if(void 0===n)return w[t];e.isPlainObject(w[t])?e.extend(!0,w[t],n):w[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,C,t);else{if(void 0===n)return C[t];C[t]=n}},debug:function(){!w.silent&&w.debug&&(w.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,w.name+":"),C.debug.apply(console,arguments)))},verbose:function(){!w.silent&&w.verbose&&w.debug&&(w.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,w.name+":"),C.verbose.apply(console,arguments)))},error:function(){w.silent||(C.error=Function.prototype.bind.call(console.error,console,w.name+":"),C.error.apply(console,arguments))},performance:{log:function(e){var t,n;w.performance&&(n=(t=(new Date).getTime())-(d||t),d=t,f.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:L,"Execution Time":n})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(C.performance.display,500)},display:function(){var t=w.name+":",n=0;d=!1,clearTimeout(C.performance.timer),e.each(f,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",u&&(t+=" '"+u+"'"),(void 0!==console.group||void 0!==console.table)&&f.length>0&&(console.groupCollapsed(t),console.table?console.table(f):e.each(f,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(t,n,o){var s,r,a,l=z;return n=n||g,o=L||o,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,o){var i=n!=s?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=s)l=l[i];else{if(void 0!==l[i])return r=l[i],!1;if(!e.isPlainObject(l[o])||n==s)return void 0!==l[o]?(r=l[o],!1):(C.error(A.method,t),!1);l=l[o]}})),e.isFunction(r)?a=r.apply(o,n):void 0!==r&&(a=r),e.isArray(i)?i.push(a):void 0!==i?i=[i,a]:void 0!==a&&(i=a),r}},v?(void 0===z&&C.initialize(),C.invoke(m)):(void 0!==z&&C.invoke("destroy"),C.initialize())}),void 0!==i?i:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document),function(e,t,n,o){e.site=e.fn.site=function(o){var i,s,r=(new Date).getTime(),a=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1),d=e.isPlainObject(o)?e.extend(!0,{},e.site.settings,o):e.extend({},e.site.settings),f=d.namespace,m=d.error,v="module-"+f,g=e(n),h=this,p=g.data(v);return i={initialize:function(){i.instantiate()},instantiate:function(){i.verbose("Storing instance of site",i),p=i,g.data(v,i)},normalize:function(){i.fix.console(),i.fix.requestAnimationFrame()},fix:{console:function(){i.debug("Normalizing window.console"),void 0!==console&&void 0!==console.log||(i.verbose("Console not available, normalizing events"),i.disable.console()),void 0!==console.group&&void 0!==console.groupEnd&&void 0!==console.groupCollapsed||(i.verbose("Console group not available, normalizing events"),t.console.group=function(){},t.console.groupEnd=function(){},t.console.groupCollapsed=function(){}),void 0===console.markTimeline&&(i.verbose("Mark timeline not available, normalizing events"),t.console.markTimeline=function(){})},consoleClear:function(){i.debug("Disabling programmatic console clearing"),t.console.clear=function(){}},requestAnimationFrame:function(){i.debug("Normalizing requestAnimationFrame"),void 0===t.requestAnimationFrame&&(i.debug("RequestAnimationFrame not available, normalizing event"),t.requestAnimationFrame=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(t){return void 0!==e.fn[t]&&void 0!==e.fn[t].settings},enabled:{modules:function(t){var n=[];return t=t||d.modules,e.each(t,function(e,t){i.moduleExists(t)&&n.push(t)}),n}},disabled:{modules:function(t){var n=[];return t=t||d.modules,e.each(t,function(e,t){i.moduleExists(t)||n.push(t)}),n}},change:{setting:function(t,n,o,s){o="string"==typeof o?"all"===o?d.modules:[o]:o||d.modules,s=void 0===s||s,e.each(o,function(o,r){var a,l=!i.moduleExists(r)||(e.fn[r].settings.namespace||!1);i.moduleExists(r)&&(i.verbose("Changing default setting",t,n,r),e.fn[r].settings[t]=n,s&&l&&(a=e(":data(module-"+l+")")).length>0&&(i.verbose("Modifying existing settings",a),a[r]("setting",t,n)))})},settings:function(t,n,o){n="string"==typeof n?[n]:n||d.modules,o=void 0===o||o,e.each(n,function(n,s){var r;i.moduleExists(s)&&(i.verbose("Changing default setting",t,s),e.extend(!0,e.fn[s].settings,t),o&&f&&(r=e(":data(module-"+f+")")).length>0&&(i.verbose("Modifying existing settings",r),r[s]("setting",t)))})}},enable:{console:function(){i.console(!0)},debug:function(e,t){e=e||d.modules,i.debug("Enabling debug for modules",e),i.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||d.modules,i.debug("Enabling verbose debug for modules",e),i.change.setting("verbose",!0,e,t)}},disable:{console:function(){i.console(!1)},debug:function(e,t){e=e||d.modules,i.debug("Disabling debug for modules",e),i.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||d.modules,i.debug("Disabling verbose debug for modules",e),i.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(void 0===p.cache.console)return void i.error(m.console);i.debug("Restoring console function"),t.console=p.cache.console}else i.debug("Disabling console function"),p.cache.console=t.console,t.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){i.verbose("Destroying previous site for",g),g.removeData(v)},cache:{},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,i,t);else{if(void 0===n)return i[t];i[t]=n}},debug:function(){d.debug&&(d.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,d.name+":"),i.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),i.verbose.apply(console,arguments)))},error:function(){i.error=Function.prototype.bind.call(console.error,console,d.name+":"),i.error.apply(console,arguments)},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(r||t),r=t,a.push({Element:h,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var t=d.name+":",n=0;r=!1,clearTimeout(i.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,o){var r,a,l,c=p;return n=n||u,o=h||o,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var s=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[s])&&n!=r)c=c[s];else{if(void 0!==c[s])return a=c[s],!1;if(!e.isPlainObject(c[o])||n==r)return void 0!==c[o]?(a=c[o],!1):(i.error(m.method,t),!1);c=c[o]}})),e.isFunction(a)?l=a.apply(o,n):void 0!==a&&(l=a),e.isArray(s)?s.push(l):void 0!==s?s=[s,l]:void 0!==l&&(s=l),a}},c?(void 0===p&&i.initialize(),i.invoke(l)):(void 0!==p&&i.destroy(),i.initialize()),void 0!==s?s:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,o){return!!e.data(t,o[3])}})}(jQuery,window,document),function(e,t,n,o){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sticky=function(o){var i,s=e(this),r=s.selector||"",a=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return s.each(function(){var s,f,m,v,g,h=e.isPlainObject(o)?e.extend(!0,{},e.fn.sticky.settings,o):e.extend({},e.fn.sticky.settings),p=h.className,b=h.namespace,y=h.error,x="."+b,C="module-"+b,w=e(this),S=e(t),T=e(h.scrollContext),k=(w.selector,w.data(C)),R=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},A=this;g={initialize:function(){g.determineContainer(),g.determineContext(),g.verbose("Initializing sticky",h,s),g.save.positions(),g.checkErrors(),g.bind.events(),h.observeChanges&&g.observeChanges(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),k=g,w.data(C,g)},destroy:function(){g.verbose("Destroying previous instance"),g.reset(),m&&m.disconnect(),v&&v.disconnect(),S.off("load"+x,g.event.load).off("resize"+x,g.event.resize),T.off("scrollchange"+x,g.event.scrollchange),w.removeData(C)},observeChanges:function(){"MutationObserver"in t&&(m=new MutationObserver(g.event.documentChanged),v=new MutationObserver(g.event.changed),m.observe(n,{childList:!0,subtree:!0}),v.observe(A,{childList:!0,subtree:!0}),v.observe(f[0],{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",v))},determineContainer:function(){s=h.container?e(h.container):w.offsetParent()},determineContext:function(){0!==(f=h.context?e(h.context):s).length||g.error(y.invalidContext,h.context,w)},checkErrors:function(){if(g.is.hidden()&&g.error(y.visible,w),g.cache.element.height>g.cache.context.height)return g.reset(),void g.error(y.elementSize,w)},bind:{events:function(){S.on("load"+x,g.event.load).on("resize"+x,g.event.resize),T.off("scroll"+x).on("scroll"+x,g.event.scroll).on("scrollchange"+x,g.event.scrollchange)}},event:{changed:function(e){clearTimeout(g.timer),g.timer=setTimeout(function(){g.verbose("DOM tree modified, updating sticky menu",e),g.refresh()},100)},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==A||e(t).find(A).length>0)&&(g.debug("Element removed from DOM, tearing down events"),g.destroy())})})},load:function(){g.verbose("Page contents finished loading"),R(g.refresh)},resize:function(){g.verbose("Window resized"),R(g.refresh)},scroll:function(){R(function(){T.triggerHandler("scrollchange"+x,T.scrollTop())})},scrollchange:function(e,t){g.stick(t),h.onScroll.call(A)}},refresh:function(e){g.reset(),h.context||g.determineContext(),e&&g.determineContainer(),g.save.positions(),g.stick(),h.onReposition.call(A)},supports:{sticky:function(){var t=e("<div/>");t[0];return t.addClass(p.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){g.lastScroll=e},elementScroll:function(e){g.elementScroll=e},positions:function(){var e={height:T.height()},t={margin:{top:parseInt(w.css("margin-top"),10),bottom:parseInt(w.css("margin-bottom"),10)},offset:w.offset(),width:w.outerWidth(),height:w.outerHeight()},n={offset:f.offset(),height:f.outerHeight()};s.outerHeight();g.is.standardScroll()||(g.debug("Non-standard scroll. Removing scroll offset from element offset"),e.top=T.scrollTop(),e.left=T.scrollLeft(),t.offset.top+=e.top,n.offset.top+=e.top,t.offset.left+=e.left,n.offset.left+=e.left),g.cache={fits:t.height+h.offset<=e.height,sameHeight:t.height==n.height,scrollContext:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:n.offset.top,height:n.height,bottom:n.offset.top+n.height}},g.set.containerSize(),g.stick(),g.debug("Caching element positions",g.cache)}},get:{direction:function(e){var t="down";return e=e||T.scrollTop(),void 0!==g.lastScroll&&(g.lastScroll<e?t="down":g.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||T.scrollTop(),g.lastScroll?e-g.lastScroll:0},currentElementScroll:function(){return g.elementScroll?g.elementScroll:g.is.top()?Math.abs(parseInt(w.css("top"),10))||0:Math.abs(parseInt(w.css("bottom"),10))||0},elementScroll:function(e){e=e||T.scrollTop();var t=g.cache.element,n=g.cache.scrollContext,o=g.get.scrollChange(e),i=t.height-n.height+h.offset,s=g.get.currentElementScroll(),r=s+o;return s=g.cache.fits||r<0?0:r>i?i:r}},remove:{lastScroll:function(){delete g.lastScroll},elementScroll:function(e){delete g.elementScroll},minimumSize:function(){s.css("min-height","")},offset:function(){w.css("margin-top","")}},set:{offset:function(){g.verbose("Setting offset on element",h.offset),w.css("margin-top",h.offset)},containerSize:function(){var e=s.get(0).tagName;"HTML"===e||"body"==e?g.determineContainer():Math.abs(s.outerHeight()-g.cache.context.height)>h.jitter&&(g.debug("Context has padding, specifying exact height for container",g.cache.context.height),s.css({height:g.cache.context.height}))},minimumSize:function(){var e=g.cache.element;s.css("min-height",e.height)},scroll:function(e){g.debug("Setting scroll on element",e),g.elementScroll!=e&&(g.is.top()&&w.css("bottom","").css("top",-e),g.is.bottom()&&w.css("top","").css("bottom",e))},size:function(){0!==g.cache.element.height&&0!==g.cache.element.width&&(A.style.setProperty("width",g.cache.element.width+"px","important"),A.style.setProperty("height",g.cache.element.height+"px","important"))}},is:{standardScroll:function(){return T[0]==t},top:function(){return w.hasClass(p.top)},bottom:function(){return w.hasClass(p.bottom)},initialPosition:function(){return!g.is.fixed()&&!g.is.bound()},hidden:function(){return!w.is(":visible")},bound:function(){return w.hasClass(p.bound)},fixed:function(){return w.hasClass(p.fixed)}},stick:function(e){var t=e||T.scrollTop(),n=g.cache,o=n.fits,i=n.sameHeight,s=n.element,r=n.scrollContext,a=n.context,l=g.is.bottom()&&h.pushing?h.bottomOffset:h.offset,e={top:t+l,bottom:t+l+r.height},c=(g.get.direction(e.top),o?0:g.get.elementScroll(e.top)),u=!o;0!==s.height&&!i&&(g.is.initialPosition()?e.top>=a.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):e.top>s.top&&(s.height+e.top-c>=a.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):(g.debug("Initial element position is fixed"),g.fixTop())):g.is.fixed()?g.is.top()?e.top<=s.top?(g.debug("Fixed element reached top of container"),g.setInitialPosition()):s.height+e.top-c>=a.bottom?(g.debug("Fixed element reached bottom of container"),g.bindBottom()):u&&(g.set.scroll(c),g.save.lastScroll(e.top),g.save.elementScroll(c)):g.is.bottom()&&(e.bottom-s.height<=s.top?(g.debug("Bottom fixed rail has reached top of container"),g.setInitialPosition()):e.bottom>=a.bottom?(g.debug("Bottom fixed rail has reached bottom of container"),g.bindBottom()):u&&(g.set.scroll(c),g.save.lastScroll(e.top),g.save.elementScroll(c))):g.is.bottom()&&(e.top<=s.top?(g.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),g.setInitialPosition()):h.pushing?g.is.bound()&&e.bottom<=a.bottom&&(g.debug("Fixing bottom attached element to bottom of browser."),g.fixBottom()):g.is.bound()&&e.top<=a.bottom-s.height&&(g.debug("Fixing bottom attached element to top of browser."),g.fixTop())))},bindTop:function(){g.debug("Binding element to top of parent container"),g.remove.offset(),w.css({left:"",top:"",marginBottom:""}).removeClass(p.fixed).removeClass(p.bottom).addClass(p.bound).addClass(p.top),h.onTop.call(A),h.onUnstick.call(A)},bindBottom:function(){g.debug("Binding element to bottom of parent container"),g.remove.offset(),w.css({left:"",top:""}).removeClass(p.fixed).removeClass(p.top).addClass(p.bound).addClass(p.bottom),h.onBottom.call(A),h.onUnstick.call(A)},setInitialPosition:function(){g.debug("Returning to initial position"),g.unfix(),g.unbind()},fixTop:function(){g.debug("Fixing element to top of page"),h.setSize&&g.set.size(),g.set.minimumSize(),g.set.offset(),w.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(p.bound).removeClass(p.bottom).addClass(p.fixed).addClass(p.top),h.onStick.call(A)},fixBottom:function(){g.debug("Sticking element to bottom of page"),h.setSize&&g.set.size(),g.set.minimumSize(),g.set.offset(),w.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(p.bound).removeClass(p.top).addClass(p.fixed).addClass(p.bottom),h.onStick.call(A)},unbind:function(){g.is.bound()&&(g.debug("Removing container bound position on element"),g.remove.offset(),w.removeClass(p.bound).removeClass(p.top).removeClass(p.bottom))},unfix:function(){g.is.fixed()&&(g.debug("Removing fixed position on element"),g.remove.minimumSize(),g.remove.offset(),w.removeClass(p.fixed).removeClass(p.top).removeClass(p.bottom),h.onUnstick.call(A))},reset:function(){g.debug("Resetting elements position"),g.unbind(),g.unfix(),g.resetCSS(),g.remove.offset(),g.remove.lastScroll()},resetCSS:function(){w.css({width:"",height:""}),s.css({height:""})},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(void 0===n)return h[t];h[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===n)return g[t];g[t]=n}},debug:function(){!h.silent&&h.debug&&(h.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,h.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),g.verbose.apply(console,arguments)))},error:function(){h.silent||(g.error=Function.prototype.bind.call(console.error,console,h.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,n;h.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,0)},display:function(){var t=h.name+":",n=0;a=!1,clearTimeout(g.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,o){var s,r,a,l=k;return n=n||d,o=A||o,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,o){var i=n!=s?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=s)l=l[i];else{if(void 0!==l[i])return r=l[i],!1;if(!e.isPlainObject(l[o])||n==s)return void 0!==l[o]&&(r=l[o],!1);l=l[o]}})),e.isFunction(r)?a=r.apply(o,n):void 0!==r&&(a=r),e.isArray(i)?i.push(a):void 0!==i?i=[i,a]:void 0!==a&&(i=a),r}},u?(void 0===k&&g.initialize(),g.invoke(c)):(void 0!==k&&k.invoke("destroy"),g.initialize())}),void 0!==i?i:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,container:!1,scrollContext:t,offset:0,bottomOffset:0,jitter:5,setSize:!0,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.visibility=function(o){var i,s=e(this),r=s.selector||"",a=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),f=s.length,m=0;return s.each(function(){var s,v,g,h,p=e.isPlainObject(o)?e.extend(!0,{},e.fn.visibility.settings,o):e.extend({},e.fn.visibility.settings),b=p.className,y=p.namespace,x=p.error,C=p.metadata,w="."+y,S="module-"+y,T=e(t),k=e(this),R=e(p.context),A=(k.selector,k.data(S)),P=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},q=this,O=!1;h={initialize:function(){h.debug("Initializing",p),h.setup.cache(),h.should.trackChanges()&&("image"==p.type&&h.setup.image(),"fixed"==p.type&&h.setup.fixed(),p.observeChanges&&h.observeChanges(),h.bind.events()),h.save.position(),h.is.visible()||h.error(x.visible,k),p.initialCheck&&h.checkVisibility(),h.instantiate()},instantiate:function(){h.debug("Storing instance",h),k.data(S,h),A=h},destroy:function(){h.verbose("Destroying previous module"),g&&g.disconnect(),v&&v.disconnect(),T.off("load"+w,h.event.load).off("resize"+w,h.event.resize),R.off("scroll"+w,h.event.scroll).off("scrollchange"+w,h.event.scrollchange),"fixed"==p.type&&(h.resetFixed(),h.remove.placeholder()),k.off(w).removeData(S)},observeChanges:function(){"MutationObserver"in t&&(v=new MutationObserver(h.event.contextChanged),g=new MutationObserver(h.event.changed),v.observe(n,{childList:!0,subtree:!0}),g.observe(q,{childList:!0,subtree:!0}),h.debug("Setting up mutation observer",g))},bind:{events:function(){h.verbose("Binding visibility events to scroll and resize"),p.refreshOnLoad&&T.on("load"+w,h.event.load),T.on("resize"+w,h.event.resize),R.off("scroll"+w).on("scroll"+w,h.event.scroll).on("scrollchange"+w,h.event.scrollchange)}},event:{changed:function(e){h.verbose("DOM tree modified, updating visibility calculations"),h.timer=setTimeout(function(){h.verbose("DOM tree modified, updating sticky menu"),h.refresh()},100)},contextChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==q||e(t).find(q).length>0)&&(h.debug("Element removed from DOM, tearing down events"),h.destroy())})})},resize:function(){h.debug("Window resized"),p.refreshOnResize&&P(h.refresh)},load:function(){h.debug("Page finished loading"),P(h.refresh)},scroll:function(){p.throttle?(clearTimeout(h.timer),h.timer=setTimeout(function(){R.triggerHandler("scrollchange"+w,[R.scrollTop()])},p.throttle)):P(function(){R.triggerHandler("scrollchange"+w,[R.scrollTop()])})},scrollchange:function(e,t){h.checkVisibility(t)}},precache:function(t,o){t instanceof Array||(t=[t]);for(var i=t.length,s=0,r=[],a=n.createElement("img"),l=function(){++s>=t.length&&e.isFunction(o)&&o()};i--;)(a=n.createElement("img")).onload=l,a.onerror=l,a.src=t[i],r.push(a)},enableCallbacks:function(){h.debug("Allowing callbacks to occur"),O=!1},disableCallbacks:function(){h.debug("Disabling all callbacks temporarily"),O=!0},should:{trackChanges:function(){return u?(h.debug("One time query, no need to bind events"),!1):(h.debug("Callbacks being attached"),!0)}},setup:{cache:function(){h.cache={occurred:{},screen:{},element:{}}},image:function(){var e=k.data(C.src);e&&(h.verbose("Lazy loading image",e),p.once=!0,p.observeChanges=!1,p.onOnScreen=function(){h.debug("Image on screen",q),h.precache(e,function(){h.set.image(e,function(){++m==f&&p.onAllLoaded.call(this),p.onLoad.call(this)})})})},fixed:function(){h.debug("Setting up fixed"),p.once=!1,p.observeChanges=!1,p.initialCheck=!0,p.refreshOnLoad=!0,o.transition||(p.transition=!1),h.create.placeholder(),h.debug("Added placeholder",s),p.onTopPassed=function(){h.debug("Element passed, adding fixed position",k),h.show.placeholder(),h.set.fixed(),p.transition&&void 0!==e.fn.transition&&k.transition(p.transition,p.duration)},p.onTopPassedReverse=function(){h.debug("Element returned to position, removing fixed",k),h.hide.placeholder(),h.remove.fixed()}}},create:{placeholder:function(){h.verbose("Creating fixed position placeholder"),s=k.clone(!1).css("display","none").addClass(b.placeholder).insertAfter(k)}},show:{placeholder:function(){h.verbose("Showing placeholder"),s.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){h.verbose("Hiding placeholder"),s.css("display","none").css("visibility","")}},set:{fixed:function(){h.verbose("Setting element to fixed position"),k.addClass(b.fixed).css({position:"fixed",top:p.offset+"px",left:"auto",zIndex:p.zIndex}),p.onFixed.call(q)},image:function(t,n){if(k.attr("src",t),p.transition)if(void 0!==e.fn.transition){if(k.hasClass(b.visible))return void h.debug("Transition already occurred on this image, skipping animation");k.transition(p.transition,p.duration,n)}else k.fadeIn(p.duration,n);else k.show()}},is:{onScreen:function(){return h.get.elementCalculations().onScreen},offScreen:function(){return h.get.elementCalculations().offScreen},visible:function(){return!(!h.cache||!h.cache.element)&&!(0===h.cache.element.width&&0===h.cache.element.offset.top)},verticallyScrollableContext:function(){var e=R.get(0)!==t&&R.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=R.get(0)!==t&&R.css("overflow-x");return"auto"==e||"scroll"==e}},refresh:function(){h.debug("Refreshing constants (width/height)"),"fixed"==p.type&&h.resetFixed(),h.reset(),h.save.position(),p.checkOnRefresh&&h.checkVisibility(),p.onRefresh.call(q)},resetFixed:function(){h.remove.fixed(),h.remove.occurred()},reset:function(){h.verbose("Resetting all cached values"),e.isPlainObject(h.cache)&&(h.cache.screen={},h.cache.element={})},checkVisibility:function(e){h.verbose("Checking visibility of element",h.cache.element),!O&&h.is.visible()&&(h.save.scroll(e),h.save.calculations(),h.passed(),h.passingReverse(),h.topVisibleReverse(),h.bottomVisibleReverse(),h.topPassedReverse(),h.bottomPassedReverse(),h.onScreen(),h.offScreen(),h.passing(),h.topVisible(),h.bottomVisible(),h.topPassed(),h.bottomPassed(),p.onUpdate&&p.onUpdate.call(q,h.get.elementCalculations()))},passed:function(t,n){var o=h.get.elementCalculations();if(t&&n)p.onPassed[t]=n;else{if(void 0!==t)return h.get.pixelsPassed(t)>o.pixelsPassed;o.passing&&e.each(p.onPassed,function(e,t){o.bottomVisible||o.pixelsPassed>h.get.pixelsPassed(e)?h.execute(t,e):p.once||h.remove.occurred(t)})}},onScreen:function(e){var t=h.get.elementCalculations(),n=e||p.onOnScreen;if(e&&(h.debug("Adding callback for onScreen",e),p.onOnScreen=e),t.onScreen?h.execute(n,"onScreen"):p.once||h.remove.occurred("onScreen"),void 0!==e)return t.onOnScreen},offScreen:function(e){var t=h.get.elementCalculations(),n=e||p.onOffScreen;if(e&&(h.debug("Adding callback for offScreen",e),p.onOffScreen=e),t.offScreen?h.execute(n,"offScreen"):p.once||h.remove.occurred("offScreen"),void 0!==e)return t.onOffScreen},passing:function(e){var t=h.get.elementCalculations(),n=e||p.onPassing;if(e&&(h.debug("Adding callback for passing",e),p.onPassing=e),t.passing?h.execute(n,"passing"):p.once||h.remove.occurred("passing"),void 0!==e)return t.passing},topVisible:function(e){var t=h.get.elementCalculations(),n=e||p.onTopVisible;if(e&&(h.debug("Adding callback for top visible",e),p.onTopVisible=e),t.topVisible?h.execute(n,"topVisible"):p.once||h.remove.occurred("topVisible"),void 0===e)return t.topVisible},bottomVisible:function(e){var t=h.get.elementCalculations(),n=e||p.onBottomVisible;if(e&&(h.debug("Adding callback for bottom visible",e),p.onBottomVisible=e),t.bottomVisible?h.execute(n,"bottomVisible"):p.once||h.remove.occurred("bottomVisible"),void 0===e)return t.bottomVisible},topPassed:function(e){var t=h.get.elementCalculations(),n=e||p.onTopPassed;if(e&&(h.debug("Adding callback for top passed",e),p.onTopPassed=e),t.topPassed?h.execute(n,"topPassed"):p.once||h.remove.occurred("topPassed"),void 0===e)return t.topPassed},bottomPassed:function(e){var t=h.get.elementCalculations(),n=e||p.onBottomPassed;if(e&&(h.debug("Adding callback for bottom passed",e),p.onBottomPassed=e),t.bottomPassed?h.execute(n,"bottomPassed"):p.once||h.remove.occurred("bottomPassed"),void 0===e)return t.bottomPassed},passingReverse:function(e){var t=h.get.elementCalculations(),n=e||p.onPassingReverse;if(e&&(h.debug("Adding callback for passing reverse",e),p.onPassingReverse=e),t.passing?p.once||h.remove.occurred("passingReverse"):h.get.occurred("passing")&&h.execute(n,"passingReverse"),void 0!==e)return!t.passing},topVisibleReverse:function(e){var t=h.get.elementCalculations(),n=e||p.onTopVisibleReverse;if(e&&(h.debug("Adding callback for top visible reverse",e),p.onTopVisibleReverse=e),t.topVisible?p.once||h.remove.occurred("topVisibleReverse"):h.get.occurred("topVisible")&&h.execute(n,"topVisibleReverse"),void 0===e)return!t.topVisible},bottomVisibleReverse:function(e){var t=h.get.elementCalculations(),n=e||p.onBottomVisibleReverse;if(e&&(h.debug("Adding callback for bottom visible reverse",e),p.onBottomVisibleReverse=e),t.bottomVisible?p.once||h.remove.occurred("bottomVisibleReverse"):h.get.occurred("bottomVisible")&&h.execute(n,"bottomVisibleReverse"),void 0===e)return!t.bottomVisible},topPassedReverse:function(e){var t=h.get.elementCalculations(),n=e||p.onTopPassedReverse;if(e&&(h.debug("Adding callback for top passed reverse",e),p.onTopPassedReverse=e),t.topPassed?p.once||h.remove.occurred("topPassedReverse"):h.get.occurred("topPassed")&&h.execute(n,"topPassedReverse"),void 0===e)return!t.onTopPassed},bottomPassedReverse:function(e){var t=h.get.elementCalculations(),n=e||p.onBottomPassedReverse;if(e&&(h.debug("Adding callback for bottom passed reverse",e),p.onBottomPassedReverse=e),t.bottomPassed?p.once||h.remove.occurred("bottomPassedReverse"):h.get.occurred("bottomPassed")&&h.execute(n,"bottomPassedReverse"),void 0===e)return!t.bottomPassed},execute:function(e,t){var n=h.get.elementCalculations(),o=h.get.screenCalculations();(e=e||!1)&&(p.continuous?(h.debug("Callback being called continuously",t,n),e.call(q,n,o)):h.get.occurred(t)||(h.debug("Conditions met",t,n),e.call(q,n,o))),h.save.occurred(t)},remove:{fixed:function(){h.debug("Removing fixed position"),k.removeClass(b.fixed).css({position:"",top:"",left:"",zIndex:""}),p.onUnfixed.call(q)},placeholder:function(){h.debug("Removing placeholder content"),s&&s.remove()},occurred:function(e){if(e){var t=h.cache.occurred;void 0!==t[e]&&!0===t[e]&&(h.debug("Callback can now be called again",e),h.cache.occurred[e]=!1)}else h.cache.occurred={}}},save:{calculations:function(){h.verbose("Saving all calculations necessary to determine positioning"),h.save.direction(),h.save.screenCalculations(),h.save.elementCalculations()},occurred:function(e){e&&(void 0!==h.cache.occurred[e]&&!0===h.cache.occurred[e]||(h.verbose("Saving callback occurred",e),h.cache.occurred[e]=!0))},scroll:function(e){e=e+p.offset||R.scrollTop()+p.offset,h.cache.scroll=e},direction:function(){var e,t=h.get.scroll(),n=h.get.lastScroll();return e=t>n&&n?"down":t<n&&n?"up":"static",h.cache.direction=e,h.cache.direction},elementPosition:function(){var e=h.cache.element,t=h.get.screenSize();return h.verbose("Saving element position"),e.fits=e.height<t.height,e.offset=k.offset(),e.width=k.outerWidth(),e.height=k.outerHeight(),h.is.verticallyScrollableContext()&&(e.offset.top+=R.scrollTop()-R.offset().top),h.is.horizontallyScrollableContext()&&(e.offset.left+=R.scrollLeft-R.offset().left),h.cache.element=e,e},elementCalculations:function(){var e=h.get.screenCalculations(),t=h.get.elementPosition();return p.includeMargin?(t.margin={},t.margin.top=parseInt(k.css("margin-top"),10),t.margin.bottom=parseInt(k.css("margin-bottom"),10),t.top=t.offset.top-t.margin.top,t.bottom=t.offset.top+t.height+t.margin.bottom):(t.top=t.offset.top,t.bottom=t.offset.top+t.height),t.topPassed=e.top>=t.top,t.bottomPassed=e.top>=t.bottom,t.topVisible=e.bottom>=t.top&&!t.bottomPassed,t.bottomVisible=e.bottom>=t.bottom&&!t.topPassed,t.pixelsPassed=0,t.percentagePassed=0,t.onScreen=t.topVisible&&!t.bottomPassed,t.passing=t.topPassed&&!t.bottomPassed,t.offScreen=!t.onScreen,t.passing&&(t.pixelsPassed=e.top-t.top,t.percentagePassed=(e.top-t.top)/t.height),h.cache.element=t,h.verbose("Updated element calculations",t),t},screenCalculations:function(){var e=h.get.scroll();return h.save.direction(),h.cache.screen.top=e,h.cache.screen.bottom=e+h.cache.screen.height,h.cache.screen},screenSize:function(){h.verbose("Saving window position"),h.cache.screen={height:R.height()}},position:function(){h.save.screenSize(),h.save.elementPosition()}},get:{pixelsPassed:function(e){var t=h.get.elementCalculations();return e.search("%")>-1?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return void 0!==h.cache.occurred&&(h.cache.occurred[e]||!1)},direction:function(){return void 0===h.cache.direction&&h.save.direction(),h.cache.direction},elementPosition:function(){return void 0===h.cache.element&&h.save.elementPosition(),h.cache.element},elementCalculations:function(){return void 0===h.cache.element&&h.save.elementCalculations(),h.cache.element},screenCalculations:function(){return void 0===h.cache.screen&&h.save.screenCalculations(),h.cache.screen},screenSize:function(){return void 0===h.cache.screen&&h.save.screenSize(),h.cache.screen},scroll:function(){return void 0===h.cache.scroll&&h.save.scroll(),h.cache.scroll},lastScroll:function(){return void 0===h.cache.screen?(h.debug("First scroll event, no last scroll could be found"),!1):h.cache.screen.top}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(void 0===n)return h[t];h[t]=n}},debug:function(){!p.silent&&p.debug&&(p.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,p.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),h.verbose.apply(console,arguments)))},error:function(){p.silent||(h.error=Function.prototype.bind.call(console.error,console,p.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var t,n;p.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:q,"Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var t=p.name+":",n=0;a=!1,clearTimeout(h.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,o){var s,r,a,l=A;return n=n||d,o=q||o,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,o){var i=n!=s?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=s)l=l[i];else{if(void 0!==l[i])return r=l[i],!1;if(!e.isPlainObject(l[o])||n==s)return void 0!==l[o]?(r=l[o],!1):(h.error(x.method,t),!1);l=l[o]}})),e.isFunction(r)?a=r.apply(o,n):void 0!==r&&(a=r),e.isArray(i)?i.push(a):void 0!==i?i=[i,a]:void 0!==a&&(i=a),r}},u?(void 0===A&&h.initialize(),A.save.scroll(),A.save.calculations(),h.invoke(c)):(void 0!==A&&A.invoke("destroy"),h.initialize())}),void 0!==i?i:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:t,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(jQuery,window,document);